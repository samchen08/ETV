/*! APPEngine version: 1.0.0 (included TVUI)  build: 2015-12-30 11:12:07  by: chenhuachun@gzsimware.com */
var TVUI=function(){return{version:"1.2.0",uuid:0,debug:!1}}();"undefined"!=typeof define&&define(function(require,exports,module){module.exports=TVUI}),this.JSON||(this.JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var Zepto=function(a){function b(a){return null===a?String(a):U[V.call(a)]||"object"}function c(a){return"function"===b(a)}function d(a){return a&&null!==a&&a===a.window}function e(a){return a&&a.nodeType===a.DOCUMENT_NODE}function f(a){return"object"===b(a)}function g(a){return a&&f(a)&&!d(a)&&Object.getPrototypeOf(a)===Object.prototype}function h(a){return a&&"number"==typeof a.length}function i(a){return D.call(a,function(a){return null!==a})}function j(a){return a.length>0?y.fn.concat.apply([],a):a}function k(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(a){return a in G?G[a]:G[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function m(a,b){return"number"!=typeof b||H[k(a)]?b:b+"px"}function n(a){var b,c;return F[a]||(b=E.createElement(a),E.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),F[a]=c),F[a]}function o(a){return"children"in a?C.slice.call(a.children):y.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function p(a,b){var c,d=a?a.length:0;for(c=0;d>c;c++)this[c]=a[c];this.length=d,this.selector=b||""}function q(b,c,d){for(x in c)d&&(g(c[x])||Z(c[x]))?(g(c[x])&&!g(b[x])&&(b[x]={}),Z(c[x])&&!Z(b[x])&&(b[x]=[]),q(b[x],c[x],d)):c[x]!==a&&(b[x]=c[x])}function r(a,b){return null===b?y(a):y(a).filter(b)}function s(a,b,d,e){return c(b)?b.call(a,d,e):b}function t(a,b,c){null===c?a.removeAttribute(b):a.setAttribute(b,c)}function u(b,c){var d=b.className||"",e=d&&d.baseVal!==a;return c===a?e?d.baseVal:d:void(e?d.baseVal=c:b.className=c)}function v(a){try{return a?"true"==a||("false"==a?!1:"null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?y.parseJSON(a):a):a}catch(b){return a}}function w(a,b){b(a);for(var c=0,d=a.childNodes.length;d>c;c++)w(a.childNodes[c],b)}var x,y,z,A,B,C=[],D=C.filter,E=window.document,F={},G={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,M=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=E.createElement("table"),Q=E.createElement("tr"),R={tr:E.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":E.createElement("div")},S=/complete|loaded|interactive/,T=/^[\w-]*$/,U={},V=U.toString,W={},X=E.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(a){return a instanceof Array};return A=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},B=function(a){return D.call(a,function(b,c){return a.indexOf(b)==c})},W.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=X).appendChild(a),d=~W.qsa(e,b).indexOf(a),f&&X.removeChild(a),d},W.fragment=function(b,c,d){var e,f,h;return J.test(b)&&(e=y(E.createElement(RegExp.$1))),e||(b.replace&&(b=b.replace(K,"<$1></$2>")),c===a&&(c=I.test(b)&&RegExp.$1),c in R||(c="*"),h=R[c],h.innerHTML=""+b,e=y.each(C.slice.call(h.childNodes),function(){h.removeChild(this)})),g(d)&&(f=y(e),y.each(d,function(a,b){N.indexOf(a)>-1?f[a](b):f.attr(a,b)})),e},W.Z=function(a,b){return new p(a,b)},W.isZ=function(a){return a instanceof W.Z},W.init=function(b,d){var e;if(!b)return W.Z();if("string"==typeof b)if(b=b.trim(),"<"==b[0]&&I.test(b))e=W.fragment(b,RegExp.$1,d),b=null;else{if(d!==a)return y(d).find(b);e=W.qsa(E,b)}else{if(c(b))return y(E).ready(b);if(W.isZ(b))return b;if(Z(b))e=i(b);else if(f(b))e=[b],b=null;else if(I.test(b))e=W.fragment(b.trim(),RegExp.$1,d),b=null;else{if(d!==a)return y(d).find(b);e=W.qsa(E,b)}}return W.Z(e,b)},y=function(a,b){return W.init(a,b)},y.extend=function(a){var b,c=C.slice.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){q(a,c,b)}),a},W.qsa=function(a,b){var c,d="#"==b[0],e=!d&&"."==b[0],f=d||e?b.slice(1):b,g=T.test(f);return a.getElementById&&g&&d?(c=a.getElementById(f))?[c]:[]:1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType?[]:C.slice.call(g&&!d&&a.getElementsByClassName?e?a.getElementsByClassName(f):a.getElementsByTagName(b):a.querySelectorAll(b))},y.contains=E.documentElement.contains?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b&&(b=b.parentNode);)if(b===a)return!0;return!1},y.type=b,y.isFunction=c,y.isWindow=d,y.isArray=Z,y.isPlainObject=g,y.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},y.inArray=function(a,b,c){return C.indexOf.call(b,a,c)},y.camelCase=A,y.trim=function(a){return"string"==typeof a?String.prototype.trim.call(a):""},y.uuid=0,y.support={},y.expr={},y.noop=function(){},y.map=function(a,b){var c,d,e,f=[];if(h(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!==c&&f.push(c);else for(e in a)c=b(a[e],e),null!==c&&f.push(c);return j(f)},y.each=function(a,b){var c,d;if(h(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},y.grep=function(a,b){return D.call(a,b)},window.JSON&&(y.parseJSON=JSON.parse),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),y.fn={constructor:W.Z,length:0,forEach:C.forEach,reduce:C.reduce,push:C.push,sort:C.sort,splice:C.splice,indexOf:C.indexOf,concat:function(){var a,b,c=[];for(a=0;a<arguments.length;a++)b=arguments[a],c[a]=W.isZ(b)?b.toArray():b;return C.concat.apply(W.isZ(this)?this.toArray():this,c)},map:function(a){return y(y.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return y(C.slice.apply(this,arguments))},ready:function(a){return S.test(E.readyState)&&E.body?a(y):E.addEventListener("DOMContentLoaded",function(){a(y)},!1),this},get:function(b){return b===a?C.slice.call(this):this[b>=0?b:b+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!==this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return C.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return c(a)?this.not(this.not(a)):y(D.call(this,function(b){return W.matches(b,a)}))},add:function(a,b){return y(B(this.concat(y(a,b))))},is:function(a){return this.length>0&&W.matches(this[0],a)},not:function(b){var d=[];if(c(b)&&b.call!==a)this.each(function(a){b.call(this,a)||d.push(this)});else{var e="string"==typeof b?this.filter(b):h(b)&&c(b.item)?C.slice.call(b):y(b);this.forEach(function(a){e.indexOf(a)<0&&d.push(a)})}return y(d)},has:function(a){return this.filter(function(){return f(a)?y.contains(this,a):y(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!f(a)?a:y(a)},last:function(){var a=this[this.length-1];return a&&!f(a)?a:y(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?y(a).filter(function(){var a=this;return C.some.call(c,function(b){return y.contains(b,a)})}):1==this.length?y(W.qsa(this[0],a)):this.map(function(){return W.qsa(this,a)}):y()},closest:function(a,b){var c=this[0],d=!1;for("object"==typeof a&&(d=y(a));c&&!(d?d.indexOf(c)>=0:W.matches(c,a));)c=c!==b&&!e(c)&&c.parentNode;return y(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=y.map(c,function(a){return(a=a.parentNode)&&!e(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return r(b,a)},parent:function(a){return r(B(this.pluck("parentNode")),a)},children:function(a){return r(this.map(function(){return o(this)}),a)},contents:function(){return this.map(function(){return this.contentDocument||C.slice.call(this.childNodes)})},siblings:function(a){return r(this.map(function(a,b){return D.call(o(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return y.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display="");var a=getComputedStyle(this,"");a&&"none"==a.getPropertyValue("display")&&(this.style.display=n(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var b=c(a);if(this[0]&&!b)var d=y(a).get(0),e=d.parentNode||this.length>1;return this.each(function(c){y(this).wrapAll(b?a.call(this,c):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){y(this[0]).before(a=y(a));for(var b;(b=a.children()).length;)a=b.first();y(a).append(this)}return this},wrapInner:function(a){var b=c(a);return this.each(function(c){var d=y(this),e=d.contents(),f=b?a.call(this,c):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){y(this).replaceWith(y(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(b){return this.each(function(){var c=y(this);(b===a?"none"==c.css("display"):b)?c.show():c.hide()})},prev:function(a){return y(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return y(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(){this.innerHTML=a}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){var c=s(this,a,b,this.textContent);this.textContent=null===c?"":""+c}):0 in this?this[0].textContent:null},attr:function(b,c){var d;return"string"!=typeof b||1 in arguments?this.each(function(a){if(1===this.nodeType)if(f(b))for(x in b)t(this,x,b[x]);else t(this,b,s(this,c,a,this.getAttribute(b)))}):this.length&&1===this[0].nodeType?!(d=this[0].getAttribute(b))&&b in this[0]?this[0][b]:d:a},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){t(this,a)},this)})},prop:function(a,b){return a=Y[a]||a,1 in arguments?this.each(function(c){this[a]=s(this,b,c,this[a])}):this[0]&&this[0][a]},data:function(b,c){var d="data-"+b.replace(M,"-$1").toLowerCase(),e=1 in arguments?this.attr(d,c):this.attr(d);return null!==e?v(e):a},val:function(a){return 0 in arguments?this.each(function(b){this.value=s(this,a,b,this.value)}):this[0]&&(this[0].multiple?y(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(b){var c=y(this),d=s(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(!this.length)return null;if(!y.contains(E.documentElement,this[0]))return{top:0,left:0,width:0,height:0};var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(a,c){if(arguments.length<2){var d,e=this[0];if(!e)return;if(d=getComputedStyle(e,""),"string"==typeof a)return e.style[A(a)]||d.getPropertyValue(a);if(Z(a)){var f={};return y.each(a,function(a,b){f[b]=e.style[A(b)]||d.getPropertyValue(b)}),f}}var g="";if("string"==b(a))c||0===c?g=k(a)+":"+m(a,c):this.each(function(){this.style.removeProperty(k(a))});else for(x in a)a[x]||0===a[x]?g+=k(x)+":"+m(x,a[x])+";":this.each(function(){this.style.removeProperty(k(x))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(y(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?C.some.call(this,function(a){return this.test(u(a))},l(a)):!1},addClass:function(a){return a?this.each(function(b){if("className"in this){z=[];var c=u(this),d=s(this,a,b,c);d.split(/\s+/g).forEach(function(a){y(this).hasClass(a)||z.push(a)},this),z.length&&u(this,c+(c?" ":"")+z.join(" "))}}):this},removeClass:function(b){return this.each(function(c){if("className"in this){if(b===a)return u(this,"");z=u(this),s(this,b,c,z).split(/\s+/g).forEach(function(a){z=z.replace(l(a)," ")}),u(this,z.trim())}})},toggleClass:function(b,c){return b?this.each(function(d){var e=y(this),f=s(this,b,d,u(this));f.split(/\s+/g).forEach(function(b){(c===a?!e.hasClass(b):c)?e.addClass(b):e.removeClass(b)})}):this},scrollTop:function(b){if(this.length){var c="scrollTop"in this[0];return b===a?c?this[0].scrollTop:this[0].pageYOffset:this.each(c?function(){this.scrollTop=b}:function(){this.scrollTo(this.scrollX,b)})}},scrollLeft:function(b){if(this.length){var c="scrollLeft"in this[0];return b===a?c?this[0].scrollLeft:this[0].pageXOffset:this.each(c?function(){this.scrollLeft=b}:function(){this.scrollTo(b,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=L.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(y(a).css("margin-top"))||0,c.left-=parseFloat(y(a).css("margin-left"))||0,d.top+=parseFloat(y(b[0]).css("border-top-width"))||0,d.left+=parseFloat(y(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!L.test(a.nodeName)&&"static"==y(a).css("position");)a=a.offsetParent;return a})}},y.fn.detach=y.fn.remove,["width","height"].forEach(function(b){var c=b.replace(/./,function(a){return a[0].toUpperCase()});y.fn[b]=function(f){var g,h=this[0];if(f===a){if(d(h))return h["inner"+c];if(e(h))return h.documentElement["scroll"+c];if(h&&h.style&&"none"==h.style.display){var i=y(h).clone().insertAfter(y(h)).show(),j=i.offset()[b];return i.remove(),j}return g=y(this).offset(),g?g[b]:0}return this.each(function(a){h=y(this),h.css(b,s(this,f,a,h[b]()))})}}),O.forEach(function(a,c){var d=c%2;y.fn[a]=function(){var a,e,f=y.map(arguments,function(c){return a=b(c),"object"==a||"array"==a||null===c?c:W.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0===c?b.nextSibling:1==c?b.firstChild:2==c?b:null;var h=y.contains(E.documentElement,e);f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return y(a).remove();e.insertBefore(a,b),h&&w(a,function(a){null===a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},y.fn[d?a+"To":"insert"+(c?"Before":"After")]=function(b){return y(b)[a](this),this}}),W.Z.prototype=p.prototype=y.fn,W.uniq=B,W.deserializeValue=v,y.zepto=W,y}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),window.TVUI&&(window.TVUI.$=Zepto),function(a,b){var c={};b(c),a.View=c}(TVUI,function(a){function b(a,b){return t.call(a,b)}function c(a){return!b(p,a)}function d(a){return"function"==typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})}function g(a){if(!v(a)||2!==a.length)throw new Error("Invalid tags: "+a);return[new RegExp(e(a[0])+"\\s*"),new RegExp("\\s*"+e(a[1]))]}function h(b,d){function f(){if(A&&!B)for(;z.length;)delete y[z.pop()];else z=[];A=!1,B=!1}d=d||a.tags,b=b||"","string"==typeof d&&(d=d.split(o));for(var h,l,m,p,t,u,v=g(d),w=new k(b),x=[],y=[],z=[],A=!1,B=!1;!w.eos();){if(h=w.pos,m=w.scanUntil(v[0]))for(var C=0,D=m.length;D>C;++C)p=m.charAt(C),c(p)?z.push(y.length):B=!0,y.push(["text",p,h,h+1]),h+=1,"\n"===p&&f();if(!w.scan(v[0]))break;if(A=!0,l=w.scan(s)||"name",w.scan(n),"="===l?(m=w.scanUntil(q),w.scan(q),w.scanUntil(v[1])):"{"===l?(m=w.scanUntil(new RegExp("\\s*"+e("}"+d[1]))),w.scan(r),w.scanUntil(v[1]),l="&"):m=w.scanUntil(v[1]),!w.scan(v[1]))throw new Error("Unclosed tag at "+w.pos);if(t=[l,m,h,w.pos],y.push(t),"#"===l||"^"===l)x.push(t);else if("/"===l){if(u=x.pop(),!u)throw new Error('Unopened section "'+m+'" at '+h);if(u[1]!==m)throw new Error('Unclosed section "'+u[1]+'" at '+h)}else"name"===l||"{"===l||"&"===l?B=!0:"="===l&&(v=g(d=m.split(o)))}if(u=x.pop())throw new Error('Unclosed section "'+u[1]+'" at '+w.pos);return j(i(y))}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function j(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function k(a){this.string=a,this.tail=a,this.pos=0}function l(a,b){this.view=null==a?{}:a,this.cache={".":this.view},this.parent=b}function m(){this.cache={}}var n=/\s*/,o=/\s+/,p=/\S/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/,t=RegExp.prototype.test,u=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===u.call(a)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};k.prototype.eos=function(){return""===this.tail},k.prototype.scan=function(a){var b=this.tail.match(a);if(b&&0===b.index){var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c}return""},k.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},l.prototype.push=function(a){return new l(a,this)},l.prototype.lookup=function(a){var b;if(a in this.cache)b=this.cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var e=a.split("."),f=0;null!=b&&f<e.length;)b=b[e[f++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this.cache[a]=b}return d(b)&&(b=b.call(this.view)),b},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=h(a,b)),d},m.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof l?b:new l(b);return this.renderTokens(d,e,c,a)},m.prototype.renderTokens=function(b,c,e,f){function g(a){return k.render(a,c,e)}for(var h,i,j="",k=this,l=0,m=b.length;m>l;++l)switch(h=b[l],h[0]){case"#":if(i=c.lookup(h[1]),!i)continue;if(v(i))for(var n=0,o=i.length;o>n;++n)j+=this.renderTokens(h[4],c.push(i[n]),e,f);else if("object"==typeof i||"string"==typeof i)j+=this.renderTokens(h[4],c.push(i),e,f);else if(d(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,f.slice(h[3],h[5]),g),null!=i&&(j+=i)}else j+=this.renderTokens(h[4],c,e,f);break;case"^":i=c.lookup(h[1]),(!i||v(i)&&0===i.length)&&(j+=this.renderTokens(h[4],c,e,f));break;case">":if(!e)continue;i=d(e)?e(h[1]):e[h[1]],null!=i&&(j+=this.renderTokens(this.parse(i),c,e,i));break;case"&":i=c.lookup(h[1]),null!=i&&(j+=i);break;case"name":i=c.lookup(h[1]),null!=i&&(j+=a.escape(i));break;case"text":j+=h[1]}return j},a.name="mustache.js",a.version="0.8.1",a.tags=["{{","}}"];var x=new m;a.clearCache=function(){return x.clearCache()},a.parse=function(a,b){return x.parse(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?void f(g):g},a.escape=f,a.Scanner=k,a.Context=l,a.Writer=m}),function($,TVUI){var emptyArray=[],slice=emptyArray.slice,Util={slice:slice,encode:encodeURIComponent,decode:decodeURIComponent,proxy:function(a,b){var c=slice.call(arguments,2);return function(){var d=slice.call(arguments),e=d.concat(c);return a.apply(b,e)}},likeArray:function(a){if("undefined"==typeof a)return!1;var b=a.length,c=$.type(a);return $.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&"object"===c&&b>0&&b-1 in a)},makeArray:function(a){return Array.prototype.slice.call(a)},queryToJson:function(a,b,c){var d={};a=a.replace(/^[^\?]*\?/,""),b=b||"&",c=c||"=";for(var e,f=this,g=new RegExp("(?:^|\\"+b+")([^\\"+c+"\\"+b+"]+)(?:\\"+c+"([^\\"+b+"]*))?","g");null!==(e=g.exec(a));)e[1]!==a&&(d[f.decode(e[1])]=f.decode(e[2]||""));return d},getParam:function(a,b){return b?this.queryToJson(b)[a]:(this.__queryCache||(this.__queryCache=this.queryToJson(location.search)),this.__queryCache[a])},param:function(a,b,c){var d,e=[],f=this;b=b||"&",c=c||"=";for(d in a)a.hasOwnProperty(d)&&null!==a[d]&&e.push(f.encode(d)+(""===a[d]?"":c+f.encode(a[d])));return e.join(b)},getFileName:function(a){var b=a||location.pathname,c=b.lastIndexOf("/")+1,d=b.lastIndexOf(".");return b.substring(c,d)},log:function(a,b,c,d,e){if(!window.DataAccess&&"undefined"!=typeof console&&console.log)try{console.log.apply(console,slice.call(arguments))}catch(f){switch(arguments.length){case 0:console.log();break;case 1:console.log(a);break;case 2:console.log(a,b);break;case 3:console.log(a,b,c);break;case 4:console.log(a,b,c,d);break;case 5:console.log(a,b,c,d,e)}}},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)}).toUpperCase()},pad:function(a,b){for(var c=a.toString().length;b>c;)a="0"+a,c++;return a},range:function(a,b,c){var d,e,f=a.length,g=parseInt((b-1)/2),h=[],i=g,j=b-i-1;for(d=e=c,h.push(a[c]);i>0;)d--,d=0>d?f-1:d,h.unshift(a[d]),i--;for(;j>0;)e++,e=e>f-1?0:e,h.push(a[e]),j--;return h},rangeLeft:function(a,b,c){var d=a.length,e=[],f=a.length>=b?b-1:a.length-1,g=c;for(e.push(a[c]);f>0;)g++,g=g>d-1?0:g,e.push(a[g]),f--;return e},rangeFixed:function(a,b,c){var d=(b-1)/2|0;d=0>c-d?0:c-d;var e=d+b-1,f=a.length,g=[];if(f>b)for(;d>f-b;)d>0&&d--,e--;else d=0,e=f-1;for(var h=d;e>=h;h++)g.push(a[h]);return g},timeout:function(a,b,c){return setTimeout(this.proxy(a,c),b)},date:function(dateStr,format,options){if(!dateStr)return new Date;var obj=null;if("string"==typeof dateStr&&/Date/.test(dateStr)){var d=dateStr.replace(/\//g,"");obj=eval("(new "+d+")")}else obj="string"==typeof dateStr?new Date(dateStr.replace(/-/g,"/")):dateStr;var setting={y:0,M:0,d:0,h:0,m:0,s:0};$.extend(setting,options||{}),obj=new Date(setting.y+obj.getFullYear(),setting.M+obj.getMonth(),setting.d+obj.getDate(),setting.h+obj.getHours(),setting.m+obj.getMinutes(),setting.s+obj.getSeconds());var o={"M+":obj.getMonth()+1,"d+":obj.getDate(),"h+":obj.getHours(),"m+":obj.getMinutes(),"s+":obj.getSeconds(),"q+":Math.floor((obj.getMonth()+3)/3),S:obj.getMilliseconds()};if(format){/(y+)/.test(format)&&(format=format.replace(RegExp.$1,4==RegExp.$1.length?obj.getFullYear():(obj.getFullYear()+"").substr(4-RegExp.$1.length)));for(var k in o)new RegExp("("+k+")").test(format)&&(format=format.replace(RegExp.$1,1==RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return format}return obj},tpl:function(a,b){if(a){a=a.replace(/%7B/gi,"{").replace(/%7D/gi,"}");var c=/\{\$(\w+)\}/g,d=[],e=function(b){return a.replace(c,function(a,c){return c in b?b[c]:a})};if($.isArray(b))for(var f=0,g=b.length;g>f;f++){var h=b[f];h._index=f,d.push(e(h))}else d.push(e(b));return d.join("")}},getCharCount:function(a){return a?a.replace(/[^\x00-\xff]/g,"xx").length:-1},subStr:function(a,b){for(var c=0,d="",e=/[^\x00-\xff]/g,f="",g=a.replace(e,"**").length,h=0;g>h&&(f=a.charAt(h).toString(),null!==f.match(e)?c+=2:c++,!(c>b));h++)d+=f;return g>b&&(d+=".."),d},getSTBType:function(){return window.DataAccess&&window.SysSetting?"gd":window.DataAccess&&window.FileManager?"sc":null}};Util.isGD="gd"==Util.getSTBType(),Util.isSC="sc"==Util.getSTBType(),TVUI.Util=Util}(Zepto,TVUI),TVUI.Key={NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,EXIT:27,CHANNEL_DOWN:91,CHANNEL_UP:93,RED:320,YELLOW:322,BLUE:323,GREEN:321,EPG:69,INFO:73,MENU:72,VOLUME_MUTE:67,SELECT:13,VOLUME_DOWN:45,VOLUME_UP:61,DOWN:83,UP:87,LEFT:65,RIGHT:68,POWER:19,PAGE_UP:306,PAGE_DOWN:307,TRACK:86,LIKE:76,BACK:8,PROGRAM_LIST:641,TV_RADIO:642,NVOD:315,MAIL:77,STAR:318,POUND:319,INVALID:90513,STATE:514,DC:515,SORT:516,GAME:517,LAST_CHANNEL:314,PAUSE:59,HOMEPAGE:72,MOSAIC:532,STOCK:533,VIDEO:313,AUDIO:535,PLAY:39,STOP:47,FUN1:518,FUN2:519,FUN3:769,FUN4:770,FUN5:771,FUN6:772,FUN7:773,FUN9:44,FUN10:46,FUN12:59,FUN13:82,FUN14:780,FUN15:781,FUN16:782,FUN17:783,FUN18:784,FUN19:785,FUN20:319,DVB_SEARCH_FINISH:10001,DVB_SEARCH_FAILED:10002,DVB_SEARCH_START:10003,DVB_SEARCH_SERVICE_READY:10004,DVB_SEARCH_STOP:10005,DVB_TUNE_SUCCESS:10031,DVB_TUNE_FAILED:10032,DVB_NIT_CHANGED:10041,DVB_NIT_NETWORK_DESCRIPTOR_READY:10042,DVB_NIT_TS_DESCRIPTOR_READY:10043,DVB_NIT_TABLE_READY:10044,DVB_BAT_BOUQUET_DESCRIPTOR_READY:10081,DVB_BAT_TS_DESCRIPTOR_READY:10082,DVB_SDT_SERVICE_DESCRIPTOR_READY:10091,DATA_DEL_ALL_SUCC:10101,DATA_DEL_ALL_FAILED:10102,DATA_DEL_TMP_SUCC:10103,DATA_DEL_TMP_FAILED:10104,DATA_UPDATE_SUCC:10105,DATA_UPDATE_FAILED:10106,DATA_REVERT_SUCC:10107,DATA_REVERT_FAILED:10108,DATA_SAVE_SUCC:10109,DATA_SAVE_FAILED:10110,DATA_BACKUP_SUCC:10111,DATA_BACKUP_FAILED:10112,DATA_RESTORE_SUCC:10113,DATA_RESTORE_FAILED:10114,EPG_SEARCH_SUCC:10201,EPG_SEARCH_STOP_WHEN_RST_TO_MAX:10202,EPG_SEARCH_TIMEOUT:10203,EPG_ACTUAL_PF_READY:10204,EPG_OTHER_PF_READY:10205,EPG_ACTUAL_SCHEDULE_READY:10206,EPG_OTHER_SCHEDULE_READY:10207,DVB_EIT_EVENT_DESCRIPTOR_READY:10208,NVOD_REFEVENT_READY:10221,NVOD_REFEVENT_TIMEOUT:10222,NVOD_TISHIEVENT_READY:10223,NVOD_TISHIEVENT_TIMEOUT:10224,NVOD_TISHIEVENT_END:10225,CA_SMARTCARD_INSERT:10401,CA_SMARTCARD_EVULSION:10402,CA_MSG_INFO:10403,CA_MSG_ALARM:10404,CA_MSG_COMMAND:10405,CA_MSG_STATUS:10406,NETWORK_CONNECTED:10501,NETWORK_DISCONNECTED:10502,LAN_NETWORK_CONNECTED:10503,LAN_NETWORK_DISCONNECTED:10504,LAN_NETWORK_DHCP_ENABLE_SUCCESS:10508,LAN_NETWORK_DHCP_ENABLE_TIMEOUT:10509,NTPTIME_SYNC_SUCC:10521,NTPTIME_SYNC_TIMEOUT:10522,PING_RESPONSE:10523,IP_UPDATED:10524,WRITE_FLASH_SUCC:10601,OTA_FORCE_UPGRADE:10701,OTA_MANUAL_UPGRADE:10702,OTA_ANALY_UPGRADE_DATA:10703,OTA_ANALY_NIT_SUCCESS:10704,OTA_ANALY_NIT_FAILED:10705,OTA_ANALY_PAT_SUCCESS:10706,OTA_ANALY_PAT_FAILED:10707,OTA_ANALY_PMT_SUCCESS:10708,OTA_ANALY_PMT_FAILED:10709,OTA_BURNING:10710,OTA_BURNING_SUCCESS:10711,OTA_BURNING_FAILED:10712,OTA_UPDATE_SUCCESS:10713,OTA_NO_UPDGRADE_INFO:10714,ORDERD_EVENT_WILL_START:10801,ORDERD_EVENT_START:10802,VOD_END_OF_STREAM:10901,VOD_BEGIN_OF_STREAM:10902,VOD_S1_ANNOUNCE_TERMINATE:10903,VOD_C1_ANNOUNCE_TERMINATE:10904,VOD_EXCEPTION:11e3,CAEXT_INQUIRE_IPP:11701,CAEXT_HIDDEN_PROGRAM:11702,VOD_EXTINIT_OVER:20004,EMAIL:11536,SEARCH_DEL_TEMP_FAILED:80001,SEARCH_FAILED:80002,SEARCH_STOP:80012,SEARCH_SAVE_FAILED:80006,SEARCH_SAVE_SUCC:80007,SEARCH_TUNE_FAILED:80008,SEARCH_TUNE_SUCC:80009,SEARCH_READY:80010},window.DataAccess||(TVUI.Key.DOWN=40,TVUI.Key.UP=38,TVUI.Key.LEFT=37,TVUI.Key.RIGHT=39,TVUI.Key.BACK=32,TVUI.Key.PAGE_UP=33,TVUI.Key.PAGE_DOWN=34),TVUI.Lang={zh:{T_1:"确定",T_2:"取消",T_3:"关闭",T_4:"退出",T_5:"播放",T_6:"续播",T_7:"锁频失败",T_8:"无法在当前频点找到节目描述信息,请联系客服96956.",T_9:"不可用媒资",T_10:"网络繁忙，请稍候!",T_11:"无权限操作",T_12:"推流会话中断,请联系客服电话96956,错误码:C1-10909-",T_13:"点播失败,是否重新点播?",T_14:"点播会话中断,请联系客服电话96956,错误码:S1-10904-",T_15:"提示"},en:{T_1:"OK",T_2:"Cancel",T_3:"Close",T_4:"Exit",T_5:"Play",T_6:"Resume",T_7:"Locking frequency failed",T_8:"Program information in not found , pls call 96956.",T_9:"Not available media resources!",T_10:"The network is busy, pls wait!",T_11:"No permission to operate.",T_12:"Flow session is interrupted,pls call 96956, error code:C1-10909-",T_13:"On demand failed, whether to replay or not?",T_14:"On demand session is interrupted,pls call 96956,error code:S1-10904-",T_15:"Prompt"}},TVUI.Lang.extend=function(a){Zepto.extend(TVUI.Lang,a||{})},function(TVUI){function empty(){}function xmlHttp(){return new window.XMLHttpRequest}function mimeToDataType(a){return a&&(a=a.split(";",2)[0]),a&&(a==htmlType?"html":a==jsonType?"json":scriptTypeRE.test(a)?"script":xmlTypeRE.test(a)&&"xml")||"text"}function appendQuery(a,b){return""===b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function ajax(options){var settings=$.extend({type:"GET",url:"",data:null,success:empty,error:empty,complete:empty,timeout:0,cache:!0,dataType:"text",headers:null,async:!0},options||{}),abortTimeout,dataType=settings.dataType,mime=accepts[dataType],headers={},setHeader=function(a,b){headers[a.toLowerCase()]=[a,b]},xhr=xmlHttp(),protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,nativeSetHeader=xhr.setRequestHeader;if((mime=settings.mimeType||mime)&&(mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime)),(settings.contentType||settings.contentType!==!1&&settings.data&&"GET"!=settings.type.toUpperCase())&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded"),settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);"object"==typeof settings.data&&(settings.data=util.param(settings.data)),settings.data&&"GET"==settings.type.toUpperCase()&&(settings.url=appendQuery(settings.url,settings.data)),settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+(new Date).getTime())),
xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(4==xhr.readyState){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0===xhr.status&&"file:"==protocol){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{"script"==dataType?eval(result+""):"xml"==dataType?result=xhr.responseXML:"json"==dataType&&(result=blankRE.test(result)?null:JSON.parse(result))}catch(err){error=err}error?settings.error(error,"parsererror",xhr,settings):settings.success(result,xhr,settings),settings.complete(xhr.status,xhr,settings)}else settings.error(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings),settings.complete(xhr.status,xhr,settings)}},settings.timeout>0&&(abortTimeout=setTimeout(function(){alert("timeout"),xhr.onreadystatechange=empty,xhr.abort(),settings.error(null,"timeout",xhr,settings)},settings.timeout)),xhr.open(settings.type,settings.url,settings.async,"","");for(name in headers)nativeSetHeader.apply(xhr,headers[name]);try{xhr.send(settings.data?settings.data:null)}catch(err){}return xhr}function parseArguments(a,b,c,d){return $.isFunction(b)&&(d=c,c=b,b=void 0),$.isFunction(c)||(d=c,c=void 0),{url:a,data:b,success:c,dataType:d}}var util=TVUI.Util,$=TVUI.$,name,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,accepts={script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"};$.extend(TVUI.$,{ajax:ajax,get:function(){return ajax(parseArguments.apply(null,arguments))},post:function(){var a=parseArguments.apply(null,arguments);return a.type="POST",ajax(a)},getJSON:function(){var a=parseArguments.apply(null,arguments);return a.dataType="json",ajax(a)},getScript:function(){var a=parseArguments.apply(null,arguments);return a.dataType="script",a.cache=!1,ajax(a)}})}(TVUI),function(a,b,c){var d,e=500,f=200,g=2e3,h=c.document,i={},j=b.Key,k={load:c,unload:c,beforeunload:c,keyup:h,keydown:h,keypress:h},l=function(a,c,d){return i[++b.uuid]={type:a,handler:c,scope:d},(k[a]||h).addEventListener(a,c,!1),b.uuid},m=function(a,b){var c,d;if(a)if(b){h.removeEventListener(a,b,!1);for(c in i)if(d=i[c],d.type==a&&d.handler==b){delete i[c];break}}else for(c in i)d=i[c],d.type==a&&(h.removeEventListener(d.type,d.handler,!1),delete i[d]);else{for(c in i)d=i[c],h.removeEventListener(d.type,d.handler,!1);i={}}},n=function(a){var b=i[a]||{};h.removeEventListener(b.type,b.handler,!1),delete i[a]},o=function(a){return a&&a.preventDefault?a.preventDefault():c.event.returnValue=!1,!1},p=function(a){var b={preventDefault:function(){},keyCode:a,which:a};return b},q=function(a){var b=a||c.event;return b.type=b.type||null,b.which=b.keyCode=b.which||b.keyCode||null,b.modifiers=b.modifiers||null,b};d={preventDefault:o,on:function(a,b,c){return l(a,function(a){b&&b.call(c||b,q(a))})},off:function(b,c){var d=a.type(b);if("number"===d)n(b);else if("array"===d)for(var e=0,f=b.length;f>e;e++)arguments.callee(b[e]);else m.apply(m,arguments)},fire:function(a,b){for(var c in i){var d=i[c];d.type==a&&d.handler.call(d.scope,p(b))}},onPress:function(a,b){return this.on("keyup",a,b)},onKey:function(a,b,c){var d,g,h,i,j,k=null,l=null;return i=this.on("keydown",function(g){g.which==a&&(d=(new Date).getTime(),k||(k=setTimeout(function(){l=setInterval(function(){b&&b.call(c,g)},f)},e)))},c),j=this.on("keyup",function(f){clearTimeout(k),clearInterval(l),k=l=null,g=(new Date).getTime(),h=g-d,e>h&&f.which==a&&b&&b.call(c,f)},c),[i,j]},onKeys:function(b,c,d){var e=this,f=[];return a.each(b,function(a,b){f=f.concat(e.onKey(b,c,d))}),f},onOk:function(a,b){return this.onKey(j.SELECT,a,b)},onLeft:function(a,b){return this.onKey(j.LEFT,a,b)},onRight:function(a,b){return this.onKey(j.RIGHT,a,b)},onUp:function(a,b){return this.onKey(j.UP,a,b)},onDown:function(a,b){return this.onKey(j.DOWN,a,b)},onMove:function(a,b){var c=[j.UP,j.RIGHT,j.DOWN,j.LEFT];return this.onKeys(c,function(c){switch(c.which){case j.UP:c.direction="up",a&&a.call(b,c.direction,c);break;case j.RIGHT:c.direction="right",a&&a.call(b,c.direction,c);break;case j.DOWN:c.direction="down",a&&a.call(b,c.direction,c);break;case j.LEFT:c.direction="left",a&&a.call(b,c.direction,c)}},b)},onNumber:function(a,b){return this.on("keyup",function(c){c.which>=j.NUM0&&c.which<=j.NUM9&&(c.number=parseInt(c.which-j.NUM0,10),a&&a.call(b,c))},b)},onComKey:function(a,b,c){var d={};return d.timerId=null,d.keyTime=null,d._lastKeys=[],this.on("keyup",function(e){clearTimeout(d.timerId);var f=(new Date).getTime();(!d.keyTime||f-d.keyTime<g)&&(d._lastKeys.push(e.which),d.keyTime=f),a.join(",")==d._lastKeys.join(",")&&(e.comKeys=a,d._lastKeys=[],d.keyTime=null,b&&b.call(c,e)),d.timerId=setTimeout(function(){d._lastKeys=[],d.keyTime=null},g)},c)},onComNumber:function(a,b,c){var d,e,f={},h=[];return f.timerId=null,f.keyTime=null,f._lastKeys=[],d=this.onNumber(function(d){clearTimeout(f.timerId);var e=(new Date).getTime();(!f.keyTime||e-f.keyTime<g)&&(f._lastKeys.push(d.number),f.keyTime=e,a&&a.call(c,f._lastKeys.join(""),d)),f.timerId=setTimeout(function(){b&&b.call(c,f._lastKeys.join(""),d),f._lastKeys=[],f.keyTime=null},g)},c),e=this.onOk(function(a){f._lastKeys.length>0&&(clearTimeout(f.timerId),b&&b.call(c,f._lastKeys.join(""),a),f._lastKeys=[],f.keyTime=null)},c),h.concat(d).concat(e)},onSystem:function(a,b){return this.on("systemevent",function(c){a&&a.call(b,c)},b)}},b.Event=d}(Zepto,TVUI,window),function(a,b){function c(b){function c(){this._init.apply(this,arguments),this.init.apply(this,arguments)}if(c.prototype._init=function(){},c.prototype.init=function(){},b){var e=function(){};a.extend(!0,e.prototype,b.prototype),c.prototype=new e,c.prototype.parent=b}return c.include=function(b){var d=b.included;return delete b.included,a.extend(c.prototype,b,!0),d&&d(c),this},c.extend=function(b){var d=b.extended;return delete b.extended,a.extend(!0,c,b),d&&d(c),this},c.proxy=function(a,b){return d.proxy(a,this,b)},c.proxyAll=function(){for(var a=d.slice.call(arguments),b=0,c=a.length;c>b;b++)this[a[b]]=this.proxy(this[a[b]])},c.prototype.proxy=c.proxy,c.prototype.proxyAll=c.proxyAll,c}var d=b.Util;c.create=function(a,b){return c(b).include(a||{})},b.Class=c}(Zepto,TVUI),function(a,b){var c=b.Util,d=b.Class,e=b.Event,f={on:function(a,b){for(var c=a.split(" "),d=(this._callbacks||(this._callbacks={}),0);d<c.length;d++)(this._callbacks[c[d]]||(this._callbacks[c[d]]=[])).push(b);return this},fire:function(){var a,b,d,e,f=c.makeArray(arguments),g=f.shift();if(!(b=this._callbacks))return!1;if(!(a=this._callbacks[g]))return!1;for(d=0,e=a.length;e>d&&a[d].apply(this,f)!==!1;d++);return!0},off:function(a,b){if(!a)return this._callbacks={},this;var c,d,e,f;if(!(d=this._callbacks))return this;if(!(c=this._callbacks[a]))return this;if(!b)return delete this._callbacks[a],this;for(e=0,f=c.length;f>e;e++)if(b===c[e]){c.splice(e,1);break}return this}},g=d.create({_init:function(){this.id=++b.uuid,this.__eventIdArray=[],this._active=!0},registerEvent:function(a){this.__eventIdArray=this.__eventIdArray.concat(a)},destroy:function(){this.fire("destroy",this),e.off(this.__eventIdArray),this.off()},active:function(a){this._active=!0,this.fire("active",this,a)},unActive:function(){this._active=!1,this.fire("unActive",this)}});g.include(f),g.extend(f),b.Base=g}(Zepto,TVUI),function(a,b){var c=a.Util,d=a.Key,e=a.$,f=function(){},g=function(){c.log(arguments)},h=!!window.DataAccess&&!!window.SysSetting,i={info:function(a,b,d){return h?d?(DataAccess.setInfo(a,b,d),void this.save(a,b)):DataAccess.getInfo(a,b):(c.log("msg:","DataAccess undefined. do: da.info"),"")},save:function(a,b){"undefined"==typeof DataAccess?c.log("msg:","DataAccess undefined. do:da.save"):DataAccess.save(a,b)},revert:function(a,b){"undefined"==typeof DataAccess?c.log("msg:","DataAccess undefined do:da.revert"):DataAccess.revert(a,b)},volume:function(a){return"number"!=e.type(a)&&"string"!=e.type(a)?parseInt(this.info("MediaSetting","OutputVolumn"),10):(a=a>32?32:a,a=0>a?0:a,this.info("MediaSetting","OutputVolumn",a),this.info("VodApp","QAMName4",a),void 0)},volumn:function(a){return this.volume(a)}},j={env:function(a,b){if("undefined"!=typeof SysSetting)if(b)SysSetting.setEnv(a,String(b));else{if(null!==b)return SysSetting.getEnv(a);SysSetting.deleteEnv(a)}else if(b)sessionStorage&&sessionStorage.setItem(a,b);else{if(null!==b)return window.sessionStorage?sessionStorage.getItem(a):"";sessionStorage&&sessionStorage.removeItem(a)}},envJSON:function(a,c){if(c){if("object"!=typeof c)throw Error("evnJSON param require JSON");this.env(a,b.stringify(c))}else{if(null!==c){var d=this.env(a);return d?b.parse(d):null}this.env(a,null)}},sendEvent:function(a,b,c){return"undefined"!=typeof SysSetting?SysSetting.sendEvent(a,b,c):void 0},getEventInfo:function(a){return"undefined"!=typeof SysSetting?SysSetting.getEventInfo(a):""},clear:function(){"undefined"!=typeof SysSetting?SysSetting.deleteallEnv():sessionStorage&&sessionStorage.clear()}},k=function(){var a=window.CA||{};return{name:a.name||"",icNo:a.icNo||"",pinLocked:a.pinLocked||!0,version:a.version||"",regionCode:a.regionCode||0,changePin:a.changePin||g,setRating:a.setRating||g,getRating:a.getRating||g,setWorkTime:a.setWorkTime||g,getWorkTime:a.getWorkTime||g,getOperators:a.getOperators||g,getWallets:a.getWallets||g,getEntitles:a.getEntitles||g,getMails:a.getMails||g,getViewedIPPs:a.getViewedIPPs||g,getInquireIPP:a.getInquireIPP||g,cancelInquireIPP:a.cancelInquireIPP||g}}(),l=function(){var a=window.Network||{};return{ethernets:a.ethernets||{},getDeviceState:a.getDeviceState||g,isEnable:function(){if(h){var b=a.getDeviceState("eth0"),c=a.getDeviceState("cm");return b>300||c>300?!0:101==b||201==c}return!0}}}(),m={download:function(c){if(!h)return void(c.error&&c.error());var d={path:"",timeout:5,dataType:"text",success:f,error:f};e.extend(d,c);var g,i;a.Event.on("systemevent",function(a){var c;switch(parseInt(a.which)){case 10151:clearTimeout(i);var e=FileSystem.getRemoteFile(g);if(1==e.open(1)){if(c=e.readAllfile(),"json"==d.dataType)try{c=b.parse(c)}catch(f){d.error(f)}e.close(),d.success(c,e),FileSystem.killObject(e)}else d.error("文件打开失败");break;case 10152:clearTimeout(i),c="前端不存在要下载的文件",d.error(c);break;case 10153:clearTimeout(i),c="文件下载失败",d.error(c);break;case 10154:clearTimeout(i),c="下载超时",d.error(c)}}),g=FileSystem.downloadRemoteFile(d.path,d.timeout),d.timeout>0&&(i=setTimeout(function(){d.error("下载超时")},1e3*d.timeout))},getFile:function(a,b,c){if(!h)return void(c&&c("不支持"));var d=FileSystem.getFile(a);if(-1==d)c&&c("文件不存在");else if(0===d)c&&c("获取文件失败");else if(1==d.open(1)){var e=d.readAllfile();d.close(),b&&b(e,d),FileSystem.killObject(d)}else c&&c("文件打开失败");return d},createFile:function(a,b){if(h){var c=FileSystem.createFile();if(0!==c&&1==c.open(1)){c.writeFile(a),c.close();var d=c.saveAs(b);return FileSystem.killObject(c),d}return 0}},removeDir:function(b,c){if(h){var d=b.split("/");""===d[d.length-1]&&d.pop(),b=d.join("/"),a.Event.on("systemevent",function(a){10160==parseInt(a.which)&&1==parseInt(a.modifiers)&&c&&c()}),1==FileSystem.existDirectory(b)&&FileSystem.deleteDirectory(b)}}},n={getChannelByServiceId:function(a){return h?user.channels.getChannelByServiceId(a):null},getDVBServiceByServiceId:function(a){var b=this.getChannelByServiceId(a);return b?b.getService():null},isSupportPlayback:function(a){var b=this.getDVBServiceByServiceId(a);return b?!!b.supportPlayback:!1}},o={},p=[],q=!1,r={search:function(a){p.push(a),q||(q=!0,this.searchProgramsByServiceId(p.shift()))},searchProgramsByServiceId:function(b){if(h){var c={serviceId:"",mask:1,timeout:10,startDate:0,days:1,complete:g};e.extend(c,b);var f,j,k=null,l=arguments.callee,m=[c.serviceId,c.mask,c.startDate,c.days].join("_"),n=o[m],r=function(a){c.complete(a),p.length>0?l(p.shift()):q=!1};n?r(n):(a.Event.onSystem(function(a){switch(parseInt(a.which)){case d.EPG_SEARCH_SUCC:case d.EPG_SEARCH_STOP_WHEN_RST_TO_MAX:case d.EPG_SEARCH_TIMEOUT:clearTimeout(k),j=EPG.getSearchResult(f),o[m]=j,r(j)}}),i.info("DVBSetting","EPGStartDate",String(c.startDate)),i.info("DVBSetting","EPGNumdays",String(c.days)),f=EPG.searchProgramsByServiceId(c.serviceId,c.mask,c.timeout),k=setTimeout(function(){r([])},1e3*(c.timeout+1)))}}};a.API={DataAccess:i,SysSetting:j,CA:k,Network:l,FileSystem:m,user:n,EPG:r}}(TVUI,JSON),function(a,b){var c=a.API.SysSetting,d=a.Event,e=a.Key,f=a.Util,g=a.Class.create({init:function(a){var d=this.options=b.extend({lang:"zh",name:"page_"+this.id,url:location.href,history:!0,preventDefault:!0,home:!1,level:0,backUrl:null,unload:function(a,b){return!0}},a||{});this.name=d.name,this.cacheKey=g.cacheKey+this.name,this.cache={},this.params=f.queryToJson(d.url)||{},this.lang=this.params.lang||c.env(g.langKey)||d.lang,this.url=d.url,this.panels={},this.activePanel=null,this.level=d.level,d.preventDefault&&(document.onkeyup=document.onkeydown=document.onkeypress=function(){return!1}),d.backUrl&&c.env(g.backUrlKey,d.backUrl),document.referrer||g.clearHistory(),this.addHistory(),this.loadCache(),this.events()},addHistory:function(){var a=this.options;a.history&&g.addHistory({name:this.name,url:this.url,home:a.home,level:this.level})},go:function(a,b){if(a){if(b){var c=f.param(b);a+=a.indexOf("?")>-1?"&"+c:"?"+c}this.fire("unload",this,a),this.isUnload=!0,this.fire("go",a),location.href=a}},back:function(){var a=g.backHistory();if(a)this.fire("back",a.url),this.go(a.url);else{var b=c.env(g.backUrlKey);b?(c.env(g.backUrlKey,null),this.fire("back",g.backUrlKey),this.go(b)):this.fire("defaultBack")}},exit:function(){var a=g.homeHistory();a?(this.fire("exit",a.url),this.go(a.url)):this.back()},refresh:function(){this.fire("unload",this,this.url),this.isUnload=!0,this.fire("refresh"),location.reload()},loadCache:function(){var a=this.cacheKey,d=c.envJSON(a);b.extend(this.cache,d||{}),c.envJSON(a,null)},setCache:function(a){b.extend(this.cache,a||{})},getCache:function(){return this.cache},clearCache:function(){this.cache={}},saveCache:function(){var a=this.cacheKey;b.isEmptyObject(this.cache)?c.envJSON(a,null):c.envJSON(a,this.cache)},setLang:function(a){this.lang=a||"zh",c.env(g.langKey,this.lang),this.fire("setLang",a)},addPanel:function(){for(var a=arguments,b=this,c=0,d=a.length;d>c;c++)!function(a){a&&a.id&&!b.panels[a.id]&&(a.on("active",function(c){for(var d in b.panels)b.panels.hasOwnProperty(d)&&a.id!=d&&b.panels[d].unActive();b.activePanel=c}),b.panels[a.id]=a)}(a[c])},events:function(){var b=this.options;this.registerEvent(d.onPress(function(c){if(this._active)switch(c.which){case e.BLUE:a.debug&&this.refresh();break;case e.EXIT:b.unload(this,"exit")&&this.exit();break;case e.BACK:b.unload(this,"back")&&this.back()}},this)),this.registerEvent(d.onComKey([e.NUM9,e.NUM6,e.NUM9,e.NUM5,e.NUM6],function(){this._active&&this.go("ui://factory/index.html")},this)),this.registerEvent(d.onComKey([e.NUM1,e.NUM1,e.NUM1,e.NUM1,e.NUM1],function(){a.debug&&(c.clear(),alert("成功清空缓存"),this.refresh())},this)),a.Event.on("unload",function(){this.isUnload||(this.fire("unload"),this.isUnload=!0)},this),this.on("unload",this.saveCache,this),this.on("active",function(){this.activePanel&&(this.activePanel._active=!0,this.activePanel.pager&&(this.activePanel.pager._active=!0))}),this.on("unActive",function(){for(var a in this.panels)if(this.panels.hasOwnProperty(a)){var b=this.panels[a];!this.activePanel&&b._active&&(this.activePanel=b),b._active=!1,b.pager&&(b.pager._active=!1)}})}},a.Base);g.extend({historyCacheKey:"sw_history",cacheKey:"sw_cache_",langKey:"sw_lang",backUrlKey:"backUrl",history:[],addHistory:function(a){var d,e=c.envJSON(this.historyCacheKey)||[],f=e.length;f>0?(d=e[f-1],d.url!=a.url&&(e=b.grep(e,function(b){return b.name==a.name&&b.url==a.url?!1:0===b.level||b.level>0&&b.level<a.level}),e.push(a),e.sort(function(a,b){return a.level-b.level}))):e.push(a),this.history=e,c.envJSON(this.historyCacheKey,e)},clearHistory:function(){this.history=[],c.envJSON(this.historyCacheKey,null)},backHistory:function(){var a=this.history;return a.length>1?(a.pop(),c.envJSON(this.historyCacheKey,a),a[a.length-1]):null},homeHistory:function(){var a,d=this.history.slice(0);if(d.pop(),a=b.grep(d,function(a){return a.home}),a.length>0)for(var e,f=d.length-1;f>=0;){if(e=d.pop(),e.home)return c.envJSON(this.historyCacheKey,d),e;--f}return null}}),a.Page=g}(TVUI,Zepto),function(a){var b,c=a.$,d=a.Class,e=a.Event,f=a.Util,g=a.Base;b=d.create({init:function(a){var b=this.options=c.extend({active:!0,cols:0,data:[],disabled:[],focusIndex:0,focusClass:"focus",selectClass:"select",leaveClass:"leave",loop:!1,pager:null,textSelector:null,textChar:-1,textAttrName:"data-text"},a||{});this._active=b.active,this.data=b.data,this.disabled=b.disabled,this.focusIndex=b.focusIndex,this.cols=b.cols,this.rows=Math.ceil(this.data.length/this.cols),this.loop=b.loop,this.pager=b.pager,this.setEmptyCell(),this.events(),this.pager&&(this.pager._active=this._active),setTimeout(this.proxy(function(){this._active&&!this.__initFocus&&this.focus(this.focusIndex)}),0)},reset:function(a,b,c){this.data=a,this.cols=c||this.cols,this.focusIndex=b>0?b:0,this.rows=Math.ceil(this.data.length/this.cols),this.disabled=[],this.setEmptyCell(),this.fire("reset",a,b,c)},setEmptyCell:function(){for(var a=this.rows*this.cols,b=this.data.length;a>b;b++)this.disable(b)},indexToCell:function(a){var b=parseInt(a/this.cols),c=a%this.cols;return[b,c]},cellToIndex:function(a){return a[0]*this.cols+a[1]},disable:function(a){this.disabled.push(a),setTimeout(this.proxy(function(){this.fire("disable",a,this)}),0)},enable:function(a){this.disabled=c.grep(this.disabled,function(b){return b!=a}),this.fire("enable",a,this)},validate:function(a){for(var b=this.disabled,c=!1,d=this.cellToIndex(a),e=0,f=b.length;f>e;e++)if(b[e]==d){c=!0;break}return c},delayLeave:function(a,b){setTimeout(this.proxy(function(){this.leave(a,this.cellToIndex(b))}),20)},leave:function(a,b){if("down"==a&&b>this.data.length-1)this.blur(),this.focus(this.data.length-1);else{var c={left:"leaveLeft",right:"leaveRight",up:"leaveUp",down:"leaveDown"},d=this.indexToCell(b);this.fire("leave",a,d,this._active,this),this.fire(c[a],d,b,this._active,this)}},_nextRight:function(a){var b=a[0],c=a[1]+1;if(c>this.cols-1){if(this.delayLeave("right",a),!this.loop)return a;c=0}return this.validate([b,c])?this._nextRight([b,c]):[b,c]},_nextLeft:function(a){var b=a[0],c=a[1]-1;if(0>c){if(this.delayLeave("left",a),!this.loop)return a;c=this.cols-1}return this.validate([b,c])?this._nextLeft([b,c]):[b,c]},_nextUp:function(a){var b=a[0]-1,c=a[1];if(0>b){if(this.delayLeave("up",a),!this.loop)return a;b=this.rows-1}return this.validate([b,c])?this._nextUp([b,c]):[b,c]},_nextDown:function(a){var b=a[0]+1,c=a[1];if(b>this.rows-1){if(this.delayLeave("down",a),!this.loop)return a;b=0}return this.validate([b,c])?this._nextDown([b,c]):[b,c]},next:function(a,b){if(!this.validate(a)){var c,d,e;switch(b){case"left":c=this._nextLeft(a);break;case"down":c=this._nextDown(a);break;case"right":c=this._nextRight(a);break;case"up":c=this._nextUp(a)}e=this.cellToIndex(c),this.focusIndex==e||this.validate(c)||(d=this.cellToIndex(a),this.blur(d,b),this.focus(e,b))}},select:function(a){var b=this.data,c=b[a];c&&this.fire("select",a,c,this)},focus:function(a){var b=this.data,c=b[a];this.focusIndex=a,c&&this.fire("focus",a,c,this),this.__initFocus=!0},autoFocus:function(a){switch(this.blur(),a){case 0:this.focus(this.options.focusIndex);break;case 1:this.focus(0);break;case 2:this.focus(this.data.length-1);break;default:this.focus(this.focusIndex)}},blur:function(){var a=this.data,b=this.focusIndex,c=a[b];c&&(this.blurIndex=b,this.fire("blur",this.blurIndex,c,this))},events:function(){this.registerEvent(e.onMove(function(a){if(this._active){var b=this.indexToCell(this.focusIndex);this.next(b,a)}},this)),this.registerEvent(e.onOk(function(){this._active&&this.select(this.focusIndex)},this)),this.on("focus",function(a,b){b&&b.nodeType&&(c(b).addClass(this.options.focusClass),this.marquee(b)),this.move(this.pager,a)}),this.on("blur",function(a,b){b&&b.nodeType&&(c(b).removeClass(this.options.focusClass),this.unMarquee(b))}),this.on("select",function(a,b){b&&b.nodeType&&c(b).addClass(this.options.selectClass)}),this.on("leave",function(a,b){if(this.blurIndex=this.leaveIndex=this.cellToIndex(b),this.pager){var c=this.pager.async,d=this.pager.type;!c&&"down"==a||c&&"down"==a&&(1==d||3==d)||c&&"right"==a&&(2==d||3==d)?this.pager.next():(!c&&"up"==a||c&&"up"==a&&(1==d||3==d)||c&&"left"==a&&(2==d||3==d))&&this.pager.prev()}}),this.on("active",function(a,b){var d=this.data[this.leaveIndex];d&&d.nodeType&&c(d).removeClass(this.options.leaveClass),this.blur(),b=void 0===b?this.focusIndex:b,this.focus(b),this.leaveIndex=null,this.pager&&this.pager.active()}),this.on("unActive",function(){var a=this.data[this.leaveIndex];a&&a.nodeType&&c(a).addClass(this.options.leaveClass),this.blur(),this.pager&&this.pager.unActive()})},marquee:function(a){var b=this.options,d=b.textSelector,e=b.textAttrName,g=b.textChar;if(g>-1){var h=d?c(a).find(d):c(a),i=h.attr(e);f.getCharCount(i)>g&&h.html("<marquee>"+i+"</marquee>")}},unMarquee:function(a){var b=this.options,d=b.textSelector,e=b.textAttrName,g=b.textChar;if(g>-1){var h=d?c(a).find(d):c(a),i=h.attr(e);f.getCharCount(i)>g&&h.html(f.subStr(i,g))}},move:function(a,b){if(a){var c=a.blurIndex,d=a.async?a.pageIndex*a.pageSize+b:b,e=0;e=c>b?2:e,e=b>c?1:e,a.move(d,e)}}},g),a.Panel=b}(TVUI),function(a){var b,c=a.$,d=a.Class,e=a.Event,f=a.Key,g=a.Base;b=d.create({init:function(a){var b=this.options=c.extend({total:1,pageSize:10,pageIndex:0,type:0,async:!1},a||{});this.total=b.total,this.pageSize=b.pageSize,this.pageCount=Math.ceil(this.total/this.pageSize),this.pageIndex=b.pageIndex,this.async=b.async,this.type=b.type,this.itemIndex=this.pageSize*this.pageIndex,this.events(),this.change(this.pageIndex,0)},events:function(){this.registerEvent(e.onPress(function(a){if(this._active)switch(a.which){case f.PAGE_DOWN:this.next();break;case f.PAGE_UP:this.prev()}},this))},move:function(a,b){this.itemIndex=a,this.fire("move",this.itemIndex,this);var c=Math.floor(this.itemIndex/this.pageSize);c!=this.pageIndex&&this.change(c,b)},moveNext:function(){this.itemIndex<this.total-1&&this.move(++this.itemIndex,1)},movePrev:function(){this.itemIndex>0&&this.total>0&&this.move(--this.itemIndex,2)},reset:function(a,b,c){this.total=a,this.pageSize=b||this.pageSize,this.pageCount=Math.ceil(this.total/this.pageSize),this.pageIndex=c>=0?c:this.pageIndex,this.itemIndex=this.pageSize*this.pageIndex,this.fire("reset",a,b,this.pageIndex)},change:function(a,b){a>=0&&a<this.pageCount&&(this.pageIndex=a,this.itemIndex=this.pageSize*this.pageIndex),setTimeout(this.proxy(this.delayChange,b),20)},delayChange:function(a){"undefined"==typeof a&&(a=1),this.fire("change",this.pageIndex,a,this)},next:function(){this.pageIndex<this.pageCount-1&&(this.change(++this.pageIndex,1),this.fire("next",this.pageIndex,this))},prev:function(){this.pageIndex>0&&(this.change(--this.pageIndex,2),this.fire("prev",this.pageIndex,this))},first:function(){this.change(0,2)},last:function(){this.change(this.pageCount-1,1)}},g),a.Pager=b}(TVUI),function(a){var b,c=a.$,d=a.Key,e=a.Class,f=a.Base,g=a.Event;b=e.create({init:function(a){var b=this.options=c.extend({view:null,content:null,track:null,handle:"span",panel:null,scrollLength:100,handleHeight:null},a||{});this.panel=b.panel,this.$view=c(b.view),this.$content=c(b.content),this.$track=c(b.track),this.$handle=c(b.handle),this.currentStep=0,this.reset(),this.events()},reset:function(a){this.viewHeight=this.$view.height(),this.panel&&this.panel.pager&&this.panel.pager.async===!0?this.contentHeight=a||this.panel.pager.pageCount*this.viewHeight:this.contentHeight=a||this.$content.height(),this.scrollHeight=Math.max(this.contentHeight-this.viewHeight,0),this.scrollHeight>0?this.show():this.hide(),this.trackHeight=this.trackHeight||this.$track.height(),this.handleHeight=this.getHandleHeight(this.contentHeight),this.$handle.height(this.handleHeight),this.scrollSteps=this.getScrollSteps(),this.perContent=this.scrollSteps>0?this.scrollHeight/this.scrollSteps:0,this.scrollTrackHeight=this.trackHeight-this.handleHeight,this.perScroller=this.scrollSteps>0?this.scrollTrackHeight/this.scrollSteps:0,this.pageCount=Math.ceil(this.contentHeight/this.viewHeight)},getHandleHeight:function(a){return this.options.handleHeight||Math.max(this.trackHeight*(this.viewHeight/a),10)},getScrollSteps:function(){return this.panel?this.panel.pager&&this.panel.pager.async===!0?this.panel.indexToCell(this.panel.pager.total-1)[0]:this.panel.rows-1:Math.ceil(this.scrollHeight/this.options.scrollLength)},hide:function(){this.$track.hide(),this.fire("hide",this)},show:function(){this.$track.show(),this.fire("show",this)},scroll:function(a){var b=this.perContent*a,c=this.perScroller*a;c=c>this.scrollTrackHeight?this.scrollTrackHeight:c,b=b>this.scrollHeight?this.scrollHeight:b,this.setTransform(this.$handle,c),this.panel||this.setTransform(this.$content,-b),this.currentStep=a,this.fire("scroll",c,b,a)},next:function(){this.currentStep<this.scrollSteps&&this.scroll(++this.currentStep)},prev:function(){this.currentStep>0&&this.scroll(--this.currentStep)},events:function(){if(this.panel){var a=this,b=a.panel.indexToCell(this.panel.pager.pageSize-1)[0]+1;this.panel.on("focus",function(c){if(a.panel.pager&&a.panel.pager.async===!0){var d=a.panel.pager.pageIndex*b+a.panel.indexToCell(c)[0];a.scroll(d)}else a.scroll(a.panel.indexToCell(c)[0])}),this.panel.on("reset",function(){if(a.reset(),a.panel.pager&&a.panel.pager.async===!1){var b=-(a.viewHeight*a.panel.pager.pageIndex);a.setTransform(a.$content,b),a.scroll(a.panel.pager.itemIndex)}}),this.panel.pager&&this.panel.pager.on("change",function(c,d){if(a.panel.pager.async){var e=2==d?a.panel.data.length-1:0,f=c*b+a.panel.indexToCell(e)[0],g=a.perScroller*f;g=g>a.scrollTrackHeight?a.scrollTrackHeight:g,a.setTransform(a.$handle,g)}else{var h=-(a.viewHeight*c);a.setTransform(a.$content,h)}})}else this.pageCount=Math.ceil(this.contentHeight/this.viewHeight),this.pageSize=Math.ceil(this.viewHeight/this.options.scrollLength),this.pageIndex=0,this.registerEvent(g.onMove(function(a){switch(a){case"up":this.prev();break;case"down":this.next()}},this)),this.registerEvent(g.onPress(function(a){switch(a.which){case d.PAGE_DOWN:this.pageIndex<this.pageCount-1?++this.pageIndex:this.pageCount-1,this.scroll(this.pageIndex*this.pageSize);break;case d.PAGE_UP:this.pageIndex>0?--this.pageIndex:0,this.scroll(this.pageIndex*this.pageSize)}},this))},setTransform:function(a,b){a.css({transform:"translate3d(0,"+b+"px,0)","-webkit-transform":"translate3d(0,"+b+"px,0)"})}},f),a.ScrollBar=b}(TVUI),function(a){var b,c=a.Class,d=a.Base,e=a.Util,f=a.Panel,g=a.Lang,h=a.$;b=c.create({init:function(a){var b=this.options=h.extend({title:"",content:"",width:300,height:null,theme:"",btns:{},timeout:null,page:null,btnFocusClass:"focus",mask:!0,auto:!0},a||{});this.clientWidth=document.documentElement.clientWidth||document.body.clientWidth,this.clientHeight=document.documentElement.clientHeight||document.body.clientHeight,this.btns=b.btns,this.page=b.page,this.render(),this.setPanel(),b.auto?this.show():this.hide(),b.timeout&&e.timeout(function(){this.destroy()},b.timeout,this)},render:function(){var a,c=this.options,d=[],f='<div class="dialog-inner"><div class="dialog-title">{$title}</div><div class="dialog-content">{$content}</div><div class="dialog-btns">{$btns}</div></div>',g='<div class="dialog-btn {$theme}"><span>{$name}</span></div>';h.each(c.btns,function(a,b){d.push(e.tpl(g,{name:b.text,theme:b.theme||""}))}),a=e.tpl(f,{title:c.title,content:c.content,btns:d.join("")}),c.mask&&(this.mask=h("<div>"),this.mask.attr("class","dialog-mask"),h(document.body).append(this.mask)),this.el=h("<div>").html(a).attr("class"," dialog "+c.theme),c.height&&this.el.height(parseInt(c.height)+"px"),h(document.body).append(this.el);var i=(this.clientWidth-c.width)/2,j=(this.clientHeight-(c.height||this.el.height()))/2;this.el.css({left:i+"px",top:j+"px",position:"absolute",width:parseInt(c.width)+"px","z-index":++b.zIndex})},setPanel:function(){var a=this.el.find(".dialog-btn"),b=this;this.panel=new f({cols:a.length,data:a}),this.panel.on("select",function(a){b.btns[a].handler&&b.btns[a].handler(b)})},show:function(){this.page&&this.page.unActive(),this.mask&&this.mask.show(),this.el.show(),this.fire("show",this)},hide:function(){this.page&&this.page.active(),this.mask&&this.mask.hide(),this.el.hide(),this.fire("hide",this)},destroy:function(){this.parent.prototype.destroy.apply(this,arguments),this.panel.destroy(),this.el.remove(),this.mask&&this.mask.remove(),this.page&&this.page.active()}},d),b.alert=function(a,c,d,e){var f=new b({content:c,title:g[a.lang].T_15,width:400,btns:[{text:g[a.lang].T_1,handler:function(a){d&&d(a),d=null,a.destroy()}}],theme:"dialog-alert",page:a,timeout:e||null});return f.on("destroy",function(){d&&d(f)}),f},b.confirm=function(a,c,d,e){return new b({content:c,title:"",width:400,btns:[{text:g[a.lang].T_1,handler:function(a){d&&d(a),a.destroy()},theme:"dialog-btn-ok"},{text:g[a.lang].T_2,handler:function(a){e&&e(a),a.destroy()},theme:"dialog-btn-cancel"}],theme:"dialog-confirm",page:a})},b.tip=function(a,c){return new b({content:a,title:"",theme:"dialog-tip",timeout:c||5e3})},b.zIndex=100,a.Dialog=b}(TVUI),function(a){var b,c=a.Key,d=a.Lang,e=a.API,f=a.$,g=a.Event,h=(a.Log,a.Util);b=a.Class.create({init:function(a){var b=this.options=f.extend({type:"video",fullScreen:!1,width:400,height:300,left:0,top:0,page:null,transparent:!0,pauseMode:1,autoDestroy:!0,helper:!1},a||{});this.pace=1,this.type=b.type,this.page=b.page,this._disableCount=0,this.playingIndex=0,this.isPlaying=!1,this.fileList=[],this.pauseMode=b.pauseMode,this._volumn=this._initVolumn(),this._createDom(b.fullScreen,b.left,b.top,b.width,b.height),this.createPlayer(),this._event()},_initVolumn:function(){var a=e.DataAccess.info("VodApp","QAMName4");return a?e.DataAccess.volume(a):(a=e.DataAccess.volume(16),e.DataAccess.info("VodApp","QAMName4",a)),this.fire("initVolume",a),parseInt(a,10)},_createDom:function(a,b,c,d,e){var g=f("<div>");a&&(d=document.documentElement.clientWidth||document.body.clientWidth,e=document.documentElement.clientHeight||document.body.clientHeight,b=c=0),g.css({position:"absolute",width:d+"px",height:e+"px",top:c+"px",left:b+"px",color:"#fff"}),this.el=g,this.options.transparent?f(document.body).append(g).css({background:"transparent"}):f(document.body).append(g),!this.options.helper&&this.el.hide()},_event:function(){var a=this;this.page&&(this.options.autoDestroy&&this.page.on("unload",this.proxy(this.destroy)),this.page.on("active unActive",function(){a._active=this._active})),this.registerEvent(g.onPress(function(b){if(a._active)switch(parseInt(b.which)){case c.STOP:a.stop();break;case c.PAUSE:a.pause();break;case c.PLAY:a.play();break;case c.VOLUME_MUTE:a.mute();break;case c.FUN9:a.fastBackward();break;case c.FUN10:a.fastForward();break;case c.FUN20:var d=a.aspect();6==d&&(d=0),d=d>6?0:++d,a.aspect(d)}})),this.registerEvent(g.onKey(c.VOLUME_UP,function(){a._active&&a.volume(1)})),this.registerEvent(g.onKey(c.VOLUME_DOWN,function(){a._active&&a.volume(-1)})),this.registerEvent(g.onSystem(function(b){if(a._active){var c=parseInt(b.which,10),f=b.modifiers,g=a.page,h=e.SysSetting.getEventInfo(f).split(","),i=Math.floor(h[1]);switch(c){case 10031:var j=DVB.currentTS;a.fire("locked",j);break;case 10032:a.fire("error",d[g.lang].T_7,c);break;case 10901:a.fire("playEnd"),a.playNext();break;case 10905:break;case 10921:a.fire("error",d[g.lang].T_8,c);break;case 10903:switch(i){case 754:a.fire("error",d[g.lang].T_9,c,i);break;default:200!=i&&a.fire("error",d[g.lang].T_10,c,i);
}break;case 10913:a._disableCount++;break;case 10906:a._disableCount=0;break;case 10907:case 10908:switch(i){case 200:break;case 403:a.fire("error",d[g.lang].T_11,c,i);break;case 754:a.fire("error",d[g.lang].T_9,c,i);break;default:i>=400&&778>=i&&455!=i&&a.fire("error",d[g.lang].T_10,c,i)}break;case 10910:a._disableCount=0;break;case 10909:switch(i){case 403:a.fire("error",d[g.lang].T_11,c,i);break;case 2101:a.fire("rtspEnd",c,i);break;case 2104:a.fire("rtspStart",c,i);break;case 5402:a.fire("error",d[g.lang].T_12,c,i)}break;case 10915:a._disableCount++;break;case 10912:a.fire("error",d[g.lang].T_13,c);break;case 10904:200!=i&&a.fire("error",d[g.lang].T_14,c,i);break;case 10914:a._disableCount++,a._disableCount>20&&a.fire("error",d[g.lang].T_14,c);break;case 10917:a._disableCount++,a._disableCount>20&&a.fire("error",d[g.lang].T_14,c);break;case 11702:break;default:c>=11301&&11328>=c&&a.fire("error",h[0],c),c>=11501&&11585>=c&&a.fire("error",h[0],c)}}}))},setPosition:function(a,b,c,d,e){if("video"==this.type){var f=[];f.push(Number(a)),f.push(b),f.push(c),f.push(d),f.push(e),this.player.position=f.join(",")}else this.player.position="0,0,0,1,1"},createPlayer:function(){var a=this.options;if(window.MediaPlayer)this.player=new MediaPlayer,this.instanceId=e.SysSetting.env("sw_player_id"),this.instanceId?this.player.bindPlayerInstance(parseInt(this.instanceId)):(this.instanceId=this.player.createPlayerInstance(a.type,"video"==a.type?2:0),e.SysSetting.env("sw_player_id",String(this.instanceId))),this.setPosition(a.fullScreen,a.left,a.top,a.width,a.height);else{var b="isMute|isDVBVideo|setPace|setPosition|DVBSrc|VODSrc|UDPSrc|src|play|pause|refresh|destroy|stop|mute|getLength|point|aspect|mode|fastForward|slowForward|fastBackward|slowBackward|volumnUp|volumnDown|active|multiSrc|next".split("|"),c=this;f.each(b,function(a,b){c[b]=function(){var a=h.makeArray(arguments);return a.unshift("player."+b+"("),a.push(")"),h.log.apply(h,a),c.el.html(a.join("")),!0}}),this.el.css({background:"#000"})}},destroy:function(a){return this.parent.prototype.destroy.apply(this,arguments),e.SysSetting.env("sw_player_id",null),e.DataAccess.info("MediaSetting","PauseMode","number"==f.type(a)?a:this.pauseMode),this.player.releasePlayerInstance()},src:function(a){var b=/(file:\/\/|http:\/\/|delivery:\/\/|rtsp:\/\/|udp:\/\/)/i;if(!b.test(a))throw new Error("文件地址不正确");this.fileList=[],this.fileList.push(a),this.isPlaying=!1},multiSrc:function(a){this.fileList=a},DVBSrc:function(a){var b={Frequency:"",SymbolRate:0,Modulation:0,ProgramNumber:"",VideoPID:0,AudioPID:0,ServiceType:null},c=f.extend(b,a),d=[];if(!c.Frequency||!c.ProgramNumber)throw new Error("缺少参数");c.ServiceType&&(this.serviceType=c.ServiceType),d.push(c.Frequency),d.push(c.SymbolRate),d.push(c.Modulation),d.push(c.ProgramNumber),d.push(c.VideoPID),d.push(c.AudioPID);var e="delivery://"+d.join(".");this.src(e)},VODSrc:function(a){var b={path:"",port:"",token:"",serverId:""},c=f.extend(b,a);if(!(c.path&&c.port&&c.token&&c.serverId))throw new Error("缺少参数");var d="rtsp://"+c.path+":"+c.port+"/;purchaseToken="+c.token+";serverId="+c.serverId;this.src(d)},UDPSrc:function(a){var b={address:"0.0.0.0",port:"",ProgramNumber:"",VideoPID:0,AudioPID:0},c=f.extend(b,a),d=[];if(!c.ProgramNumber)throw new Error("缺少参数");d.push(c.address),d.push(c.port),d.push(c.ProgramNumber),d.push(c.VideoPID),d.push(c.AudioPID);var e="udp://"+d.join(":");this.src(e)},play:function(){if(this.isPlaying){this.pace=1,this.player.pace=this.pace;this.fileList[this.playingIndex];this.player.refresh(),this.fire("play",1)}else{this.player.source=this.fileList[this.playingIndex],this.isPlaying=!0,this.pace=1,this.player.pace=this.pace;var a=this.player.play();this.fire("play",a)}},playNext:function(){var a=this.fileList.length,b=this.playingIndex;a-1>b?(++this.playingIndex,this.stop(),this.play()):this.fire("allEnd",this.player)},pause:function(a){return this.fire("pause"),this.player.pause("undefined"==typeof a?this.pauseMode:a)},stop:function(a){return this.isPlaying=!1,this.fire("stop"),this.player.pause("undefined"==typeof a?this.pauseMode:a)},volume:function(a){switch(a){case 1:this._volumn=this._volumn>=32?32:++this._volumn;break;case-1:this._volumn=this._volumn<=0?0:--this._volumn;break;default:this._volumn=a}e.DataAccess.volumn(this._volumn),this.fire("volume",this._volumn)},mute:function(){var a=!!this.player.getMute();a?this.player.audioUnmute():this.player.audioMute(),this.fire("mute",!a)},isMute:function(){return!!this.player.getMute()},getLength:function(a){var b=this.player.getMediaDuration(),c=b.split(":");if(a)return 3==c.length?3600*parseInt(c[0])+60*parseInt(c[1])+parseInt(c[2]):0;var d=f.map(c,function(a){return h.pad(a,2)});return d.join(":")},getPlayTime:function(){var a=this.point(),b=parseInt(a/3600),c=parseInt((a-3600*b)/60),d=a-3600*b-60*c,e=[b,c,d],g=f.map(e,function(a){return h.pad(a,2)});return g.join(":")},point:function(a){return void 0===a||"number"!=f.type(parseInt(a))?this.player.currentPoint:void(this.player.point=a)},refresh:function(){this.player.refresh()},aspect:function(a){return a?(this.player.videoAspect=a,void this.fire("aspect",a)):this.player.videoAspect},mode:function(a){return a?void(this.player.videoMode=a):this.player.videoMode},setPace:function(a){this.player.pace=this.pace=a,this.refresh(),a>1?this.fire("fastForward",this.pace):-1>a&&this.fire("fastBackward",this.pace),this.fire("pace",this.pace)},fastForward:function(){1==this.pace?this.pace=12:12==this.pace?this.pace=32:32==this.pace?this.pace=1:this.pace=12,this.player.pace=this.pace,this.refresh(),this.fire("fastForward",this.pace)},fastBackward:function(){1==this.pace?this.pace=-12:-12==this.pace?this.pace=-32:-32==this.pace?this.pace=1:this.pace=-12,this.player.pace=this.pace,this.refresh(),this.fire("fastBackward",this.pace)},isDVBVideo:function(){if(this.serviceType)return 2!=this.serviceType;var a=this.player.eleStreams||[];if(1==a.length&&4==a[0].eleStreamType)return!1;for(var b=0,c=a.length;c>b;b++)if(2==a[b].eleStreamType||4==a[b].eleStreamType)return!0;return!1}},a.Base),a.Player=b}(TVUI),function(a,b){var c=b.Class.create({init:function(b){var c=this.options=a.extend({view:document.body,el:document.body,placeholder:"theme/common/img/space.gif",threshold:100,replaceSrc:!1,async:!1,content:"",scrollBar:null},b||{});this.el=a(c.el),this.view=a(c.view),this.placeholder=c.placeholder,this.threshold=c.threshold,this.content=c.content,this.async=c.async,this.replaceSrc=c.replaceSrc,this.scrollBar=c.scrollBar,this.parentOffset=this.view.offset(),this.render(),this.imgs=this.el.find("img"),this.events(),this.load()},render:function(){if(this.content&&this.async){if(this.replaceSrc){var a=/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,b=/src=['"]([^'"]+)['"]/gi,c=this.placeholder;this.content=this.content.replace(a,function(a){return a.replace(b,function(a){return"data-"+a+' src="'+c+'"'})})}this.el.html(this.content)}},events:function(){var a=this;this.scrollBar&&(this.scrollBar.on("scroll",function(){a.load()}),this.imgs.each(function(b,c){c.onload=function(){a.scrollBar.reset()}}))},load:function(){var b=this,c=this.parentOffset,d=c.top+c.height;this.imgs.each(function(c,e){if(-1===e.className.indexOf("J_load")){var f=a(e),g=f.offset(),h=f.attr("data-src");g.top-b.threshold<d&&f.attr("src",h).addClass("J_load")}})}},b.Base);b.LazyLoad=c}(Zepto,TVUI),function(a,b){var c={__config:{template:'<div class="tvui-loading"><span>加载中...</span></div>',appendTo:document.body,width:300,height:50},show:function(){if(!this.el){var a=this.__config;this.el=b(a.template),this.parent=b(a.appendTo);var c=this.parent.offset();this.el.css({width:a.width,height:a.height,position:"absolute",left:(c.width-a.width)/2,top:(c.height-a.height)/2}),this.el.appendTo(this.parent)}this.el.show()},hide:function(){this.el.hide()},config:function(a){b.extend(this.__config,a||{}),this.el=null,this.parent=null}};a.Loading=c}(TVUI,Zepto),function(a,b){var c=a.Class.create({init:function(a){var c=this.options=b.extend({el:document.body,data:[],index:0,interval:5e3,auto:!0,focusClass:"focus",active:!0},a||{});this.el=b(c.el),this.data=c.data,this.currentIndex=c.index,this.total=this.data.length,this._active=c.active,this._active&&this.focus(),this.options.auto&&this.start(),this.change(this.currentIndex),this.events()},change:function(a){this.img||(this.img=new Image,this.el.append(this.img)),this.img.src=this.data[a],this.fire("change",a)},next:function(){var a=this.data.length-1;this.currentIndex<a&&++this.currentIndex,this.change(this.currentIndex)},prev:function(){this.currentIndex>0&&--this.currentIndex,this.change(this.currentIndex)},start:function(){this.stop();var a=this;this.timer=setInterval(function(){a.currentIndex=a.currentIndex>=a.total-1?0:++a.currentIndex,a.change(a.currentIndex)},this.options.interval)},stop:function(){clearInterval(this.timer)},focus:function(){this.el.addClass(this.options.focusClass),this.fire("focus")},blur:function(){this.el.removeClass(this.options.focusClass),this.fire("blur")},select:function(){this.fire("select",this.currentIndex,this.data[this.currentIndex])},events:function(){var b=this;this.registerEvent(a.Event.onOk(function(){this._active&&this.select()},this)),this.on("active",function(){b.focus()}),this.on("unActive",function(){b.blur()})}},a.Base);a.Slide=c}(TVUI,Zepto),function(a,b){var c=a.Class.create({init:function(a){var c=this.options=b.extend({data:[],template:"<ul>{{#data}}<li>{{name}}</li>{{/data}}</ul>",itemSelector:"li",type:1,itemSize:100,container:document.body,viewCount:5,panelOptions:{}},a||{});this.setData(c.data),this.template=c.template,this.container=b(c.container)},setData:function(a){this.data={data:a||[]}},setTemplate:function(a){this.template=a},render:function(){var c=this.options,d=a.View.render(this.template,this.data);this.el=b(d),this.items=this.el.find(c.itemSelector),1==c.type?this.el.width(this.items.length*c.itemSize):this.el.height(this.items.length*c.itemSize),this.container.empty(),this.container.append(this.el),this.setPanel()},setPanel:function(){if(this.panel)this.panel.reset(this.items,0);else{var c=this.options,d=["focus","blur","select","active","unActive","leave"],e=this,f=b.extend(c.panelOptions,{data:this.items,cols:1==c.type?this.items.length:1});this.panel=new a.Panel(f),this.panel.on("focus initFixed",function(b){var d=a.Util.rangeFixed(e.items,c.viewCount,b),f=e.items.indexOf(d[0]),g=-c.itemSize*f,h=1==c.type?{transform:"translate3d("+g+"px,0,0)","-webkit-transform":"translate3d("+g+"px,0,0)"}:{transform:"translate3d(0,"+g+"px,0)","-webkit-transform":"translate3d(0,"+g+"px,0)"};e.el.css(h)}),b.each(d,function(b,c){e[c]=function(){e.panel[c].apply(e.panel,arguments)},e.panel.on(c,function(){var b=a.Util.makeArray(arguments);b.unshift(c),e.fire.apply(e,b)})}),this.panel.on("active unActive",function(){e._active=e.panel._active})}},reset:function(a){this.setData(a||[]),this.render(),this.fire("reset",a)},destroy:function(){this.panel&&this.panel.destroy(),this.el&&this.el.remove(),this.items=null,this.parent.prototype.destroy.call(this)}},a.Base);a.Nav=c}(TVUI,Zepto),function(a,b){var c=a.Class.create({init:function(a){var c=this.options=b.extend({data:[],template:"<ul>{{#data}}<li>{{name}}</li>{{/data}}</ul>",scrollTemplate:'<div class="tvui-scrollBar"><span></span></div>',container:document.body,itemSelector:"li",scrollHandleSelector:"span",cols:0,total:0,pageIndex:0,pageSize:10,focusIndex:0,async:!1,type:1,scrollBar:!0,active:!0,textSelector:null,textChar:-1,textAttrName:"data-text"},a||{});this.container=b(c.container),this.template=c.template,this.$track=b(c.scrollTemplate),this.$handle=this.$track.find(c.scrollHandleSelector),this._active=c.active,this.setData(c.data)},setData:function(a){this.data={data:a||[]},this.fire("setData",a)},render:function(){var c=this.options,d=a.View.render(this.template,this.data),e=b(d);this.items=e.find(c.itemSelector),this.isRender?(this.$content.remove(),this.$content=e,this.container.prepend(this.$content)):(this.container.empty(),this.$content=e,this.container.append(this.$content),c.scrollBar?this.container.append(this.$track):this.$track.hide(),this.setPanel()),this.isRender=!0},setPanel:function(){var c=["focus","blur","select","active","unActive","leave"],d=this.options,e=this;this.pager=new a.Pager({total:d.total,pageIndex:d.pageIndex,pageSize:d.pageSize,async:d.async,type:d.type}),this.panel=new a.Panel({data:this.items,cols:d.cols,focusIndex:d.focusIndex,pager:this.pager,active:d.active,textSelector:d.textSelector,textChar:d.textChar,textAttrName:d.textAttrName}),this.scrollBar=new a.ScrollBar({view:this.container,content:this.$content,track:this.$track,handle:this.$handle,panel:this.panel}),b.each(c,function(b,c){e[c]=function(){e.panel[c].apply(e.panel,arguments)},e.panel.on(c,function(){var b=a.Util.makeArray(arguments);b.unshift(c),e.fire.apply(e,b)})}),this.pager.on("change",function(a,b){e.fire("pager",a,b)}),this.panel.on("active unActive",function(){e._active=e.panel._active})},reset:function(a,b,c,d){c=c||0,d=d||0;var e=this.options;this.setData(a),this.render(),this.pager&&this.pager.reset(b,e.pageSize,c),this.panel&&this.panel.reset(this.items,d),this.scrollBar&&(this.scrollBar.$content=this.$content,this.scrollBar.reset()),this.panel&&this._active&&this.panel.autoFocus(),this.fire("reset",a,b,c,d)},change:function(a){this.pager&&this.pager.change(a)},autoFocus:function(a){this.panel&&this.panel._active&&this.panel.autoFocus(a)},destroy:function(){this.pager&&this.pager.destroy(),this.panel&&this.panel.destroy(),this.scrollBar&&this.scrollBar.destroy(),this.$content&&this.$content.remove(),this.$track&&this.$track.remove(),this.parent.prototype.destroy.call(this)}},a.Base);a.List=c}(TVUI,Zepto),function(a){var b,c=a.Util,d=a.Event,e=a.$,f=!1,g=function(){var a=c.makeArray(arguments),d=[];e.each(a,function(a,b){if("object"==typeof b)try{d.push(JSON.stringify(b))}catch(c){d.push(b)}else d.push(b)});var g=e("<div>").css({"border-bottom":"1px dashed #666",padding:"10px"});f=!0,g.html(d.join(" | ")),b&&(b.show(),b.append(g)),c.log.apply(c,arguments)};d.onKey(318,function(){a.debug&&(f=!f,f?b.show():b.hide())}),d.onKey(73,function(){a.debug&&b.empty()}),window.onerror=function(){},a.Log=g,e(function(){a.debug&&(b=e("#debugbox"),0===b.length&&(b=e("<div>").attr("id","debugbox"),b.css({position:"absolute","z-index":"9999",width:"90%",height:"90%",background:"#fff",color:"#000",left:"50px",top:"20px",border:"5px solid red","font-size":"18px","word-break":"break-all",display:"none"}),e("body").append(b)))})}(TVUI),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.io=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,module,exports){module.exports=a("./lib/")},{"./lib/":2}],2:[function(a,module,exports){function b(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,h=c(a),i=h.source,j=h.id,k=h.path,l=g[j]&&g[j].nsps[k]&&k==g[j].nsps[k].nsp,m=b.forceNew||b["force new connection"]||!1===b.multiplex||l;return m?(f("ignoring socket cache for %s",i),d=e(i,b)):(g[j]||(f("new io instance for %s",i),g[j]=e(i,b)),d=g[j]),d.socket(h.path)}var c=a("./url"),d=a("socket.io-parser"),e=a("./manager"),f=a("debug")("socket.io-client");module.exports=exports=b;var g=exports.managers={};exports.protocol=d.protocol,exports.connect=b,exports.Manager=a("./manager"),exports.Socket=a("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":44}],3:[function(a,module,exports){function b(a,c){return this instanceof b?(a&&"object"==typeof a&&(c=a,a=void 0),c=c||{},c.path=c.path||"/socket.io",this.nsps={},this.subs=[],this.opts=c,this.reconnection(c.reconnection!==!1),this.reconnectionAttempts(c.reconnectionAttempts||1/0),this.reconnectionDelay(c.reconnectionDelay||1e3),this.reconnectionDelayMax(c.reconnectionDelayMax||5e3),this.randomizationFactor(c.randomizationFactor||.5),this.backoff=new k({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==c.timeout?2e4:c.timeout),this.readyState="closed",this.uri=a,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new f.Encoder,this.decoder=new f.Decoder,this.autoConnect=c.autoConnect!==!1,void(this.autoConnect&&this.open())):new b(a,c)}var c=(a("./url"),a("engine.io-client")),d=a("./socket"),e=a("component-emitter"),f=a("socket.io-parser"),g=a("./on"),h=a("component-bind"),i=(a("object-component"),a("debug")("socket.io-client:manager")),j=a("indexof"),k=a("backo2");module.exports=b,b.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)},b.prototype.updateSocketIds=function(){for(var a in this.nsps)this.nsps[a].id=this.engine.id},e(b.prototype),b.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},b.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},b.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},b.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},b.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},b.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},b.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},b.prototype.open=b.prototype.connect=function(a){if(i("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;i("opening %s",this.uri),this.engine=c(this.uri,this.opts);var b=this.engine,d=this;this.readyState="opening",this.skipReconnect=!1;var e=g(b,"open",function(){d.onopen(),a&&a()}),f=g(b,"error",function(b){if(i("connect_error"),d.cleanup(),d.readyState="closed",d.emitAll("connect_error",b),a){var c=new Error("Connection error");c.data=b,a(c)}else d.maybeReconnectOnOpen()});if(!1!==this._timeout){var h=this._timeout;i("connect attempt will timeout after %d",h);var j=setTimeout(function(){i("connect attempt timed out after %d",h),e.destroy(),b.close(),b.emit("error","timeout"),d.emitAll("connect_timeout",h)},h);this.subs.push({destroy:function(){clearTimeout(j)}})}return this.subs.push(e),this.subs.push(f),this},b.prototype.onopen=function(){i("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(g(a,"data",h(this,"ondata"))),this.subs.push(g(this.decoder,"decoded",h(this,"ondecoded"))),this.subs.push(g(a,"error",h(this,"onerror"))),this.subs.push(g(a,"close",h(this,"onclose")))},b.prototype.ondata=function(a){this.decoder.add(a)},b.prototype.ondecoded=function(a){this.emit("packet",a)},b.prototype.onerror=function(a){i("error",a),this.emitAll("error",a)},b.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new d(this,a),this.nsps[a]=b;var c=this;b.on("connect",function(){b.id=c.engine.id,~j(c.connected,b)||c.connected.push(b)})}return b},b.prototype.destroy=function(a){var b=j(this.connected,a);~b&&this.connected.splice(b,1),this.connected.length||this.close()},b.prototype.packet=function(a){i("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<a.length;c++)b.engine.write(a[c]);b.encoding=!1,b.processPacketQueue()}))},b.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},b.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},b.prototype.close=b.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},b.prototype.onclose=function(a){i("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},b.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)i("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();i("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(i("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(i("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(i("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},b.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:40,"object-component":41,"socket.io-parser":44}],4:[function(a,module,exports){function b(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}module.exports=b},{}],5:[function(a,module,exports){function b(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var c=a("socket.io-parser"),d=a("component-emitter"),e=a("to-array"),f=a("./on"),g=a("component-bind"),h=a("debug")("socket.io-client:socket"),i=a("has-binary");module.exports=exports=b;var j={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},k=d.prototype.emit;d(b.prototype),b.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[f(a,"open",g(this,"onopen")),f(a,"packet",g(this,"onpacket")),f(a,"close",g(this,"onclose"))]}},b.prototype.open=b.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},b.prototype.send=function(){var a=e(arguments);return a.unshift("message"),this.emit.apply(this,a),this},b.prototype.emit=function(a){if(j.hasOwnProperty(a))return k.apply(this,arguments),this;var b=e(arguments),d=c.EVENT;i(b)&&(d=c.BINARY_EVENT);var f={type:d,data:b};return"function"==typeof b[b.length-1]&&(h("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),f.id=this.ids++),this.connected?this.packet(f):this.sendBuffer.push(f),this},b.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},b.prototype.onopen=function(){h("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:c.CONNECT})},b.prototype.onclose=function(a){h("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},b.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case c.CONNECT:this.onconnect();break;case c.EVENT:this.onevent(a);break;case c.BINARY_EVENT:this.onevent(a);break;case c.ACK:this.onack(a);break;case c.BINARY_ACK:this.onack(a);break;case c.DISCONNECT:this.ondisconnect();break;case c.ERROR:this.emit("error",a.data)}},b.prototype.onevent=function(a){var b=a.data||[];h("emitting event %j",b),null!=a.id&&(h("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?k.apply(this,b):this.receiveBuffer.push(b)},b.prototype.ack=function(a){var b=this,d=!1;return function(){if(!d){d=!0;var f=e(arguments);h("sending ack %j",f);var g=i(f)?c.BINARY_ACK:c.ACK;b.packet({type:g,id:a,data:f})}}},b.prototype.onack=function(a){h("calling ack %s with %j",a.id,a.data);var b=this.acks[a.id];b.apply(this,a.data),delete this.acks[a.id]},b.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},b.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)k.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},b.prototype.ondisconnect=function(){h("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},b.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},b.prototype.close=b.prototype.disconnect=function(){return this.connected&&(h("performing disconnect (%s)",this.nsp),this.packet({type:c.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":36,"socket.io-parser":44,"to-array":48}],6:[function(a,module,exports){(function(b){function c(a,c){var f=a,c=c||b.location;return null==a&&(a=c.protocol+"//"+c.host),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?c.protocol+a:c.hostname+a),/^(https?|wss?):\/\//.test(a)||(e("protocol-less url %s",a),a="undefined"!=typeof c?c.protocol+"//"+a:"https://"+a),e("parse %s",a),f=d(a)),f.port||(/^(http|ws)$/.test(f.protocol)?f.port="80":/^(http|ws)s$/.test(f.protocol)&&(f.port="443")),f.path=f.path||"/",f.id=f.protocol+"://"+f.host+":"+f.port,f.href=f.protocol+"://"+f.host+(c&&c.port==f.port?"":":"+f.port),f}var d=a("parseuri"),e=a("debug")("socket.io-client:url");module.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:42}],7:[function(a,module,exports){function b(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}module.exports=b,b.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=0==(1&Math.floor(10*b))?a-c:a+c}return 0|Math.min(a,this.max)},b.prototype.reset=function(){this.attempts=0},b.prototype.setMin=function(a){this.ms=a},b.prototype.setMax=function(a){this.max=a},b.prototype.setJitter=function(a){this.jitter=a}},{}],8:[function(a,module,exports){var b=[].slice;module.exports=function(a,c){if("string"==typeof c&&(c=a[c]),"function"!=typeof c)throw new Error("bind() requires a function");var d=b.call(arguments,2);return function(){return c.apply(a,d.concat(b.call(arguments)))}}},{}],9:[function(a,module,exports){function b(a){return a?c(a):void 0}function c(a){for(var c in b.prototype)a[c]=b.prototype[c];return a}module.exports=b,b.prototype.on=b.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},b.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},b.prototype.off=b.prototype.removeListener=b.prototype.removeAllListeners=b.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},b.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},b.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},b.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],10:[function(a,module,exports){function b(a){return b.enabled(a)?function(d){d=c(d);var e=new Date,f=e-(b[a]||e);b[a]=e,d=a+" "+d+" +"+b.humanize(f),!window.DataAccess&&"undefined"!=typeof console&&console.log&&window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function c(a){return a instanceof Error?a.stack||a.message:a}module.exports=b,b.names=[],b.skips=[],b.enable=function(a){try{localStorage.debug=a}catch(c){}for(var d=(a||"").split(/[\s,]+/),e=d.length,f=0;e>f;f++)a=d[f].replace("*",".*?"),"-"===a[0]?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$"))},b.disable=function(){b.enable("")},b.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},b.enabled=function(a){for(var c=0,d=b.skips.length;d>c;c++)if(b.skips[c].test(a))return!1;for(var c=0,d=b.names.length;d>c;c++)if(b.names[c].test(a))return!0;return!1};try{window.localStorage&&b.enable(localStorage.debug)}catch(d){}},{}],11:[function(a,module,exports){module.exports=a("./lib/")},{"./lib/":12}],12:[function(a,module,exports){module.exports=a("./socket"),module.exports.parser=a("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(a,module,exports){(function(b){function c(a,d){if(!(this instanceof c))return new c(a,d);if(d=d||{},a&&"object"==typeof a&&(d=a,a=null),a&&(a=j(a),d.host=a.host,d.secure="https"==a.protocol||"wss"==a.protocol,d.port=a.port,a.query&&(d.query=a.query)),this.secure=null!=d.secure?d.secure:b.location&&"https:"==location.protocol,d.host){var e=d.host.split(":");d.hostname=e.shift(),e.length?d.port=e.pop():d.port||(d.port=this.secure?"443":"80")}this.agent=d.agent||!1,this.hostname=d.hostname||(b.location?location.hostname:"localhost"),this.port=d.port||(b.location&&location.port?location.port:this.secure?443:80),this.query=d.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==d.upgrade,this.path=(d.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!d.forceJSONP,this.jsonp=!1!==d.jsonp,this.forceBase64=!!d.forceBase64,this.enablesXDR=!!d.enablesXDR,this.timestampParam=d.timestampParam||"t",this.timestampRequests=d.timestampRequests,this.transports=d.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=d.policyPort||843,this.rememberUpgrade=d.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=d.onlyBinaryUpgrades,this.pfx=d.pfx||null,this.key=d.key||null,this.passphrase=d.passphrase||null,this.cert=d.cert||null,this.ca=d.ca||null,this.ciphers=d.ciphers||null,this.rejectUnauthorized=d.rejectUnauthorized||null,this.open()}function d(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var e=a("./transports"),f=a("component-emitter"),g=a("debug")("engine.io-client:socket"),h=a("indexof"),i=a("engine.io-parser"),j=a("parseuri"),k=a("parsejson"),l=a("parseqs");module.exports=c,c.priorWebsocketSuccess=!1,f(c.prototype),c.protocol=i.protocol,c.Socket=c,c.Transport=a("./transport"),c.transports=a("./transports"),c.parser=a("engine.io-parser"),c.prototype.createTransport=function(a){g('creating transport "%s"',a);var b=d(this.query);b.EIO=i.protocol,b.transport=a,this.id&&(b.sid=this.id);var c=new e[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,
timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return c},c.prototype.open=function(){var a;if(this.rememberUpgrade&&c.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0==this.transports.length){var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";var a;try{a=this.createTransport(a)}catch(d){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},c.prototype.setTransport=function(a){g("setting transport %s",a.name);var b=this;this.transport&&(g("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},c.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(g('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(g('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;c.priorWebsocketSuccess="websocket"==k.name,g('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(g("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{g('probe transport "%s" failed',a);var d=new Error("probe error");d.transport=k.name,m.emit("upgradeError",d)}}))}function d(){l||(l=!0,j(),k.close(),k=null)}function e(b){var c=new Error("probe error: "+b);c.transport=k.name,d(),g('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",c)}function f(){e("transport closed")}function h(){e("socket closed")}function i(a){k&&a.name!=k.name&&(g('"%s" works - aborting "%s"',a.name,k.name),d())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",h),m.removeListener("upgrading",i)}g('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;c.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",h),this.once("upgrading",i),k.open()},c.prototype.onOpen=function(){if(g("socket open"),this.readyState="open",c.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){g("starting upgrade probes");for(var a=0,b=this.upgrades.length;b>a;a++)this.probe(this.upgrades[a])}},c.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(g('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(k(a.data));break;case"pong":this.setPing();break;case"error":var b=new Error("server error");b.code=a.data,this.emit("error",b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else g('packet received with socket readyState "%s"',this.readyState)},c.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},c.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},c.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){g("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},c.prototype.ping=function(){this.sendPacket("ping")},c.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)this.callbackBuffer[a]&&this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},c.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(g("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},c.prototype.write=c.prototype.send=function(a,b){return this.sendPacket("message",a,b),this},c.prototype.sendPacket=function(a,b,c){if("closing"!=this.readyState&&"closed"!=this.readyState){var d={type:a,data:b};this.emit("packetCreate",d),this.writeBuffer.push(d),this.callbackBuffer.push(c),this.flush()}},c.prototype.close=function(){function a(){d.onClose("forced close"),g("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},c.prototype.onError=function(a){g("socket error %j",a),c.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},c.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){g('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){c.writeBuffer=[],c.callbackBuffer=[],c.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b)}},c.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;d>c;c++)~h(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:40,parsejson:32,parseqs:33,parseuri:34}],14:[function(a,module,exports){function b(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized}var c=a("engine.io-parser"),d=a("component-emitter");module.exports=b,d(b.prototype),b.timestamps=0,b.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},b.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},b.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},b.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},b.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},b.prototype.onData=function(a){var b=c.decodePacket(a,this.socket.binaryType);this.onPacket(b)},b.prototype.onPacket=function(a){this.emit("packet",a)},b.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(a,module,exports){(function(b){function c(a){var c,g=!1,h=!1,i=!1!==a.jsonp;if(b.location){var j="https:"==location.protocol,k=location.port;k||(k=j?443:80),g=a.hostname!=location.hostname||k!=a.port,h=a.secure!=j}if(a.xdomain=g,a.xscheme=h,c=new d(a),"open"in c&&!a.forceJSONP)return new e(a);if(!i)throw new Error("JSONP disabled");return new f(a)}var d=a("xmlhttprequest"),e=a("./polling-xhr"),f=a("./polling-jsonp"),g=a("./websocket");exports.polling=c,exports.websocket=g}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(a,module,exports){(function(b){function c(){}function d(a){e.call(this,a),this.query=this.query||{},g||(b.___eio||(b.___eio=[]),g=b.___eio),this.index=g.length;var d=this;g.push(function(a){d.onData(a)}),this.query.j=this.index,b.document&&b.addEventListener&&b.addEventListener("beforeunload",function(){d.script&&(d.script.onerror=c)},!1)}var e=a("./polling"),f=a("component-inherit");module.exports=d;var g,h=/\n/g,i=/\\n/g;f(d,e),d.prototype.supportsBinary=!1,d.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),e.prototype.doClose.call(this)},d.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),this.script=b;var d="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},d.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(b)}catch(a){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),j=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),j.name="d",g.appendChild(j),document.body.appendChild(g),this.form=g,this.area=j}this.form.action=this.uri(),d(),a=a.replace(i,"\\\n"),this.area.value=a.replace(h,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(a,module,exports){(function(b){function c(){}function d(a){if(h.call(this,a),b.location){var c="https:"==location.protocol,d=location.port;d||(d=c?443:80),this.xd=a.hostname!=b.location.hostname||d!=a.port,this.xs=a.secure!=c}}function e(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.create()}function f(){for(var a in e.requests)e.requests.hasOwnProperty(a)&&e.requests[a].abort()}var g=a("xmlhttprequest"),h=a("./polling"),i=a("component-emitter"),j=a("component-inherit"),k=a("debug")("engine.io-client:polling-xhr");module.exports=d,module.exports.Request=e,j(d,h),d.prototype.supportsBinary=!0,d.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,new e(a)},d.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},d.prototype.doPoll=function(){k("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},i(e.prototype),e.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized;var c=this.xhr=new g(a),d=this;try{if(k("xhr open %s: %s",this.method,this.uri),c.open(this.method,this.uri,this.async),this.supportsBinary&&(c.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?c.setRequestHeader("Content-type","application/octet-stream"):c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(f){}"withCredentials"in c&&(c.withCredentials=!0),this.hasXDR()?(c.onload=function(){d.onLoad()},c.onerror=function(){d.onError(c.responseText)}):c.onreadystatechange=function(){4==c.readyState&&(200==c.status||1223==c.status?d.onLoad():setTimeout(function(){d.onError(c.status)},0))},k("xhr data %s",this.data),c.send(this.data)}catch(f){return void setTimeout(function(){d.onError(f)},0)}b.document&&(this.index=e.requestsCount++,e.requests[this.index]=this)},e.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},e.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},e.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},e.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,a)try{this.xhr.abort()}catch(d){}b.document&&delete e.requests[this.index],this.xhr=null}},e.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}a="application/octet-stream"===b?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},e.prototype.hasXDR=function(){return"undefined"!=typeof b.XDomainRequest&&!this.xs&&this.enablesXDR},e.prototype.abort=function(){this.cleanup()},b.document&&(e.requestsCount=0,e.requests={},b.attachEvent?b.attachEvent("onunload",f):b.addEventListener&&b.addEventListener("beforeunload",f,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(a,module,exports){function b(a){var b=a&&a.forceBase64;(!h||b)&&(this.supportsBinary=!1),c.call(this,a)}var c=a("../transport"),d=a("parseqs"),e=a("engine.io-parser"),f=a("component-inherit"),g=a("debug")("engine.io-client:polling");module.exports=b;var h=function(){var b=a("xmlhttprequest"),c=new b({xdomain:!1});return null!=c.responseType}();f(b,c),b.prototype.name="polling",b.prototype.doOpen=function(){this.poll()},b.prototype.pause=function(a){function b(){g("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(g("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){g("pre-pause polling complete"),--d||b()})),this.writable||(g("we are currently writing - waiting to pause"),d++,this.once("drain",function(){g("pre-pause writing complete"),--d||b()}))}else b()},b.prototype.poll=function(){g("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},b.prototype.onData=function(a){var b=this;g("polling got data %s",a);var c=function(a,c,d){return"opening"==b.readyState&&b.onOpen(),"close"==a.type?(b.onClose(),!1):void b.onPacket(a)};e.decodePayload(a,this.socket.binaryType,c),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():g('ignoring poll - transport state "%s"',this.readyState))},b.prototype.doClose=function(){function a(){g("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(g("transport open - closing"),a()):(g("transport not open - deferring close"),this.once("open",a))},b.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;e.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},b.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",e="";return!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+c.timestamps++),this.supportsBinary||a.sid||(a.b64=1),a=d.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(e=":"+this.port),a.length&&(a="?"+a),b+"://"+this.hostname+e+this.path+a}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,xmlhttprequest:20}],19:[function(a,module,exports){function b(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),c.call(this,a)}var c=a("../transport"),d=a("engine.io-parser"),e=a("parseqs"),f=a("component-inherit"),g=a("debug")("engine.io-client:websocket"),h=a("ws");module.exports=b,f(b,c),b.prototype.name="websocket",b.prototype.supportsBinary=!0,b.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b=void 0,c={agent:this.agent};c.pfx=this.pfx,c.key=this.key,c.passphrase=this.passphrase,c.cert=this.cert,c.ca=this.ca,c.ciphers=this.ciphers,c.rejectUnauthorized=this.rejectUnauthorized,this.ws=new h(a,b,c),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},b.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(b.prototype.onData=function(a){var b=this;setTimeout(function(){c.prototype.onData.call(b,a)},0)}),b.prototype.write=function(a){function b(){c.writable=!0,c.emit("drain")}var c=this;this.writable=!1;for(var e=0,f=a.length;f>e;e++)d.encodePacket(a[e],this.supportsBinary,function(a){try{c.ws.send(a)}catch(b){g("websocket closed before onclose event")}});setTimeout(b,0)},b.prototype.onClose=function(){c.prototype.onClose.call(this)},b.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},b.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=+new Date),this.supportsBinary||(a.b64=1),a=e.encode(a),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a},b.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===b.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,ws:35}],20:[function(a,module,exports){var b=a("has-cors");module.exports=function(a){var c=a.xdomain,d=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!c||b))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!d&&e)return new XDomainRequest}catch(f){}if(!c)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{"has-cors":38}],21:[function(a,module,exports){module.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],22:[function(a,module,exports){function b(){return"WebkitAppearance"in document.documentElement.style||!window.DataAccess&&window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function c(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+exports.humanize(this.diff),!b)return a;var c="color: "+this.color;a=[a[0],c,"color: inherit"].concat(Array.prototype.slice.call(a,1));var d=0,e=0;return a[0].replace(/%[a-z%]/g,function(a){"%"!==a&&(d++,"%c"===a&&(e=d))}),a.splice(e,0,c),a}function d(){return!window.DataAccess&&"undefined"!=typeof console&&console.log?"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments):!1}function e(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(b){}}function f(){var a;try{a=localStorage.debug}catch(b){}return a}exports=module.exports=a("./debug"),exports.log=d,exports.formatArgs=c,exports.save=e,exports.load=f,exports.useColors=b,exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(a){return JSON.stringify(a)},exports.enable(f())},{"./debug":23}],23:[function(a,module,exports){function b(){return exports.colors[i++%exports.colors.length]}function c(a){function c(){}function d(){var a=d,c=+new Date,e=c-(h||c);a.diff=e,a.prev=h,a.curr=c,h=c,null==a.useColors&&(a.useColors=exports.useColors()),null==a.color&&a.useColors&&(a.color=b());var f=Array.prototype.slice.call(arguments);f[0]=exports.coerce(f[0]),"string"!=typeof f[0]&&(f=["%o"].concat(f));var g=0;if(f[0]=f[0].replace(/%([a-z%])/g,function(b,c){if("%"===b)return b;g++;var d=exports.formatters[c];if("function"==typeof d){var e=f[g];b=d.call(a,e),f.splice(g,1),g--}return b}),"function"==typeof exports.formatArgs&&(f=exports.formatArgs.apply(a,f)),!window.DataAccess&&"undefined"!=typeof console&&console.log){var i=d.log||exports.log||console.log.bind(console);i.apply(a,f)}}c.enabled=!1,d.enabled=!0;var e=exports.enabled(a)?d:c;return e.namespace=a,e}function d(a){exports.save(a);for(var b=(a||"").split(/[\s,]+/),c=b.length,d=0;c>d;d++)b[d]&&(a=b[d].replace(/\*/g,".*?"),"-"===a[0]?exports.skips.push(new RegExp("^"+a.substr(1)+"$")):exports.names.push(new RegExp("^"+a+"$")))}function e(){exports.enable("")}function f(a){var b,c;for(b=0,c=exports.skips.length;c>b;b++)if(exports.skips[b].test(a))return!1;for(b=0,c=exports.names.length;c>b;b++)if(exports.names[b].test(a))return!0;return!1}function g(a){return a instanceof Error?a.stack||a.message:a}exports=module.exports=c,exports.coerce=g,exports.disable=e,exports.enable=d,exports.enabled=f,exports.humanize=a("ms"),exports.names=[],exports.skips=[],exports.formatters={};var h,i=0},{ms:24}],24:[function(a,module,exports){function b(a){var b=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"y":return c*j;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"h":return c*h;case"minutes":case"minute":case"m":return c*g;case"seconds":case"second":case"s":return c*f;case"ms":return c}}}function c(a){return a>=i?Math.round(a/i)+"d":a>=h?Math.round(a/h)+"h":a>=g?Math.round(a/g)+"m":a>=f?Math.round(a/f)+"s":a+"ms"}function d(a){return e(a,i,"day")||e(a,h,"hour")||e(a,g,"minute")||e(a,f,"second")||a+" ms"}function e(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var f=1e3,g=60*f,h=60*g,i=24*h,j=365.25*i;module.exports=function(a,e){return e=e||{},"string"==typeof a?b(a):e["long"]?d(a):c(a)}},{}],25:[function(a,module,exports){(function(b){function c(a,b){var c="b"+exports.packets[a.type]+a.data.data;return b(c)}function d(a,b,c){if(!b)return exports.encodeBase64Packet(a,c);var d=a.data,e=new Uint8Array(d),f=new Uint8Array(1+d.byteLength);f[0]=q[a.type];for(var g=0;g<e.length;g++)f[g+1]=e[g];return c(f.buffer)}function e(a,b,c){if(!b)return exports.encodeBase64Packet(a,c);var d=new FileReader;return d.onload=function(){a.data=d.result,exports.encodePacket(a,b,!0,c)},d.readAsArrayBuffer(a.data)}function f(a,b,c){if(!b)return exports.encodeBase64Packet(a,c);if(p)return e(a,b,c);var d=new Uint8Array(1);d[0]=q[a.type];var f=new t([d.buffer,a.data]);return c(f)}function g(a,b,c){for(var d=new Array(a.length),e=l(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}var h=a("./keys"),i=a("has-binary"),j=a("arraybuffer.slice"),k=a("base64-arraybuffer"),l=a("after"),m=a("utf8"),n=navigator.userAgent.match(/Android/i),o=/PhantomJS/i.test(navigator.userAgent),p=n||o;exports.protocol=3;var q=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},r=h(q),s={type:"error",data:"parser error"},t=a("blob");exports.encodePacket=function(a,e,g,h){"function"==typeof e&&(h=e,e=!1),"function"==typeof g&&(h=g,g=null);var i=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&i instanceof ArrayBuffer)return d(a,e,h);if(t&&i instanceof b.Blob)return f(a,e,h);if(i&&i.base64)return c(a,h);var j=q[a.type];return void 0!==a.data&&(j+=g?m.encode(String(a.data)):String(a.data)),h(""+j)},exports.encodeBase64Packet=function(a,c){var d="b"+exports.packets[a.type];if(t&&a.data instanceof t){var e=new FileReader;return e.onload=function(){var a=e.result.split(",")[1];c(d+a)},e.readAsDataURL(a.data)}var f;try{f=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(g){for(var h=new Uint8Array(a.data),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h[j];f=String.fromCharCode.apply(null,i)}return d+=b.btoa(f),c(d)},exports.decodePacket=function(a,b,c){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return exports.decodeBase64Packet(a.substr(1),b);if(c)try{a=m.decode(a)}catch(d){return s}var e=a.charAt(0);return Number(e)==e&&r[e]?a.length>1?{type:r[e],data:a.substring(1)}:{type:r[e]}:s}var f=new Uint8Array(a),e=f[0],g=j(a,1);return t&&"blob"===b&&(g=new t([g])),{type:r[e],data:g}},exports.decodeBase64Packet=function(a,c){var d=r[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=k.decode(a.substr(1));return"blob"===c&&t&&(e=new t([e])),{type:d,data:e}},exports.encodePayload=function(a,b,c){function d(a){return a.length+":"+a}function e(a,c){exports.encodePacket(a,f?b:!1,!0,function(a){c(null,d(a))})}"function"==typeof b&&(c=b,b=null);var f=i(a);return b&&f?t&&!p?exports.encodePayloadAsBlob(a,c):exports.encodePayloadAsArrayBuffer(a,c):a.length?void g(a,e,function(a,b){return c(b.join(""))}):c("0:")},exports.decodePayload=function(a,b,c){if("string"!=typeof a)return exports.decodePayloadAsBinary(a,b,c);"function"==typeof b&&(c=b,b=null);var d;if(""==a)return c(s,0,1);for(var e,f,g="",h=0,i=a.length;i>h;h++){var j=a.charAt(h);if(":"!=j)g+=j;else{if(""==g||g!=(e=Number(g)))return c(s,0,1);if(f=a.substr(h+1,e),g!=f.length)return c(s,0,1);if(f.length){if(d=exports.decodePacket(f,b,!0),s.type==d.type&&s.data==d.data)return c(s,0,1);var k=c(d,h+e,i);if(!1===k)return}h+=e,g=""}}return""!=g?c(s,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(a,b){function c(a,b){exports.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void g(a,c,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}b?e[f++]=0:e[f++]=1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)}):b(new ArrayBuffer(0))},exports.encodePayloadAsBlob=function(a,b){function c(a,b){exports.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,t){var i=new t([c.buffer,h.buffer,a]);b(null,i)}})}g(a,c,function(a,c){return b(new t(c))})},exports.decodePayloadAsBinary=function(a,b,c){"function"==typeof b&&(c=b,b=null);for(var d=a,e=[],f=!1;d.byteLength>0;){for(var g=new Uint8Array(d),h=0===g[0],i="",k=1;255!=g[k];k++){if(i.length>310){f=!0;break}i+=g[k]}if(f)return c(s,0,1);d=j(d,2+i.length),i=parseInt(i);var l=j(d,0,i);if(h)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(m){var n=new Uint8Array(l);l="";for(var k=0;k<n.length;k++)l+=String.fromCharCode(n[k])}e.push(l),d=j(d,i)}var o=e.length;e.forEach(function(a,d){c(exports.decodePacket(a,b,!0),d,o)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":36,utf8:31}],26:[function(a,module,exports){module.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],27:[function(a,module,exports){function b(a,b,d){function e(a,c){if(e.count<=0)throw new Error("after called too many times");--e.count,a?(f=!0,b(a),b=d):0!==e.count||f||b(null,c)}var f=!1;return d=d||c,e.count=a,0===a?b():e}function c(){}module.exports=b},{}],28:[function(a,module,exports){module.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(0>b&&(b+=d),0>c&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;c>g;g++,h++)f[h]=e[g];return f.buffer}},{}],29:[function(a,module,exports){!function(a){"use strict";exports.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;e>c;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},exports.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;i>c;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(a,module,exports){(function(a){function b(a,b){b=b||{};for(var d=new c,e=0;e<a.length;e++)d.append(a[e]);return b.type?d.getBlob(b.type):d.getBlob()}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,d=function(){try{var a=new Blob(["hi"]);return 2==a.size}catch(b){return!1}}(),e=c&&c.prototype.append&&c.prototype.getBlob;module.exports=function(){return d?a.Blob:e?b:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(b,module,exports){(function(b){!function(c){function d(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function e(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=r(b>>>10&1023|55296),b=56320|1023&b),e+=r(b);return e}function f(a,b){return r(a>>b&63|128)}function g(a){if(0==(4294967168&a))return r(a);var b="";return 0==(4294965248&a)?b=r(a>>6&31|192):0==(4294901760&a)?(b=r(a>>12&15|224),b+=f(a,6)):0==(4292870144&a)&&(b=r(a>>18&7|240),b+=f(a,12),b+=f(a,6)),b+=r(63&a|128)}function h(a){for(var b,c=d(a),e=c.length,f=-1,h="";++f<e;)b=c[f],h+=g(b);return h}function i(){if(q>=p)throw Error("Invalid byte index");var a=255&o[q];if(q++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function j(){var a,b,c,d,e;if(q>p)throw Error("Invalid byte index");if(q==p)return!1;if(a=255&o[q],q++,0==(128&a))return a;if(192==(224&a)){
var b=i();if(e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=i(),c=i(),e=(15&a)<<12|b<<6|c,e>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=i(),c=i(),d=i(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&1114111>=e))return e;throw Error("Invalid UTF-8 detected")}function k(a){o=d(a),p=o.length,q=0;for(var b,c=[];(b=j())!==!1;)c.push(b);return e(c)}var l="object"==typeof exports&&exports,m="object"==typeof module&&module&&module.exports==l&&module,n="object"==typeof b&&b;(n.global===n||n.window===n)&&(c=n);var o,p,q,r=String.fromCharCode,s={version:"2.0.0",encode:h,decode:k};if("function"==typeof a&&"object"==typeof a.amd&&a.amd)a(function(){return s});else if(l&&!l.nodeType)if(m)m.exports=s;else{var t={},u=t.hasOwnProperty;for(var v in s)u.call(s,v)&&(l[v]=s[v])}else c.utf8=s}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(a,module,exports){(function(a){var b=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,e=/(?:^|:|,)(?:\s*\[)+/g,f=/^\s+/,g=/\s+$/;module.exports=function(h){return"string"==typeof h&&h?(h=h.replace(f,"").replace(g,""),a.JSON&&JSON.parse?JSON.parse(h):b.test(h.replace(c,"@").replace(d,"]").replace(e,""))?new Function("return "+h)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(a,module,exports){exports.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},exports.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;e>d;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],34:[function(a,module,exports){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(a){var d=a,e=a.indexOf("["),f=a.indexOf("]");-1!=e&&-1!=f&&(a=a.substring(0,e)+a.substring(e,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=b.exec(a||""),h={},i=14;i--;)h[c[i]]=g[i]||"";return-1!=e&&-1!=f&&(h.source=d,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],35:[function(a,module,exports){function b(a,b,c){var e;return e=b?new d(a,b):new d(a)}var c=function(){return this}(),d=c.WebSocket||c.MozWebSocket;module.exports=d?b:null,d&&(b.prototype=d.prototype)},{}],36:[function(a,module,exports){(function(b){function c(a){function c(a){if(!a)return!1;if(b.Buffer&&b.Buffer.isBuffer(a)||b.ArrayBuffer&&a instanceof ArrayBuffer||b.Blob&&a instanceof Blob)return!0;if(d(a)){for(var e=0;e<a.length;e++)if(c(a[e]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(a.hasOwnProperty(f)&&c(a[f]))return!0}return!1}return c(a)}var d=a("isarray");module.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:37}],37:[function(a,module,exports){module.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],38:[function(a,module,exports){var b=a("global");try{module.exports="XMLHttpRequest"in b&&"withCredentials"in new b.XMLHttpRequest}catch(c){module.exports=!1}},{global:39}],39:[function(a,module,exports){module.exports=function(){return this}()},{}],40:[function(a,module,exports){var b=[].indexOf;module.exports=function(a,c){if(b)return a.indexOf(c);for(var d=0;d<a.length;++d)if(a[d]===c)return d;return-1}},{}],41:[function(a,module,exports){var b=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(a){var c=[];for(var d in a)b.call(a,d)&&c.push(d);return c},exports.values=function(a){var c=[];for(var d in a)b.call(a,d)&&c.push(a[d]);return c},exports.merge=function(a,c){for(var d in c)b.call(c,d)&&(a[d]=c[d]);return a},exports.length=function(a){return exports.keys(a).length},exports.isEmpty=function(a){return 0==exports.length(a)}},{}],42:[function(a,module,exports){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(a){for(var d=b.exec(a||""),e={},f=14;f--;)e[c[f]]=d[f]||"";return e}},{}],43:[function(a,module,exports){(function(b){var c=a("isarray"),d=a("./is-buffer");exports.deconstructPacket=function(a){function b(a){if(!a)return a;if(d(a)){var f={_placeholder:!0,num:e.length};return e.push(a),f}if(c(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var e=[],f=a.data,g=a;return g.data=b(f),g.attachments=e.length,{packet:g,buffers:e}},exports.reconstructPacket=function(a,b){function d(a){if(a&&a._placeholder){var e=b[a.num];return e}if(c(a)){for(var f=0;f<a.length;f++)a[f]=d(a[f]);return a}if(a&&"object"==typeof a){for(var g in a)a[g]=d(a[g]);return a}return a}return a.data=d(a.data),a.attachments=void 0,a},exports.removeBlobs=function(a,e){function f(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||e(h)},k.readAsArrayBuffer(a)}else if(c(a))for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!d(a))for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||e(h)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":45,isarray:46}],44:[function(a,module,exports){function b(){}function c(a){var b="",c=!1;return b+=a.type,(exports.BINARY_EVENT==a.type||exports.BINARY_ACK==a.type)&&(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(c=!0,b+=a.nsp),null!=a.id&&(c&&(b+=",",c=!1),b+=a.id),null!=a.data&&(c&&(b+=","),b+=j.stringify(a.data)),i("encoded %j as %s",a,b),b}function d(a,b){function d(a){var d=l.deconstructPacket(a),e=c(d.packet),f=d.buffers;f.unshift(e),b(f)}l.removeBlobs(a,d)}function e(){this.reconstructor=null}function f(a){var b={},c=0;if(b.type=Number(a.charAt(0)),null==exports.types[b.type])return h();if(exports.BINARY_EVENT==b.type||exports.BINARY_ACK==b.type){for(b.attachments="";"-"!=a.charAt(++c);)b.attachments+=a.charAt(c);b.attachments=Number(b.attachments)}if("/"==a.charAt(c+1))for(b.nsp="";++c;){var d=a.charAt(c);if(","==d)break;if(b.nsp+=d,c+1==a.length)break}else b.nsp="/";var e=a.charAt(c+1);if(""!=e&&Number(e)==e){for(b.id="";++c;){var d=a.charAt(c);if(null==d||Number(d)!=d){--c;break}if(b.id+=a.charAt(c),c+1==a.length)break}b.id=Number(b.id)}if(a.charAt(++c))try{b.data=j.parse(a.substr(c))}catch(f){return h()}return i("decoded %s as %j",a,b),b}function g(a){this.reconPack=a,this.buffers=[]}function h(a){return{type:exports.ERROR,data:"parser error"}}var i=a("debug")("socket.io-parser"),j=a("json3"),k=(a("isarray"),a("component-emitter")),l=a("./binary"),m=a("./is-buffer");exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=b,exports.Decoder=e,b.prototype.encode=function(a,b){if(i("encoding packet %j",a),exports.BINARY_EVENT==a.type||exports.BINARY_ACK==a.type)d(a,b);else{var e=c(a);b([e])}},k(e.prototype),e.prototype.add=function(a){var b;if("string"==typeof a)b=f(a),exports.BINARY_EVENT==b.type||exports.BINARY_ACK==b.type?(this.reconstructor=new g(b),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!m(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},e.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},g.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},g.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":43,"./is-buffer":45,"component-emitter":9,debug:10,isarray:46,json3:47}],45:[function(a,module,exports){(function(a){function b(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}module.exports=b}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(a,module,exports){module.exports=a(37)},{}],47:[function(b,module,exports){!function(b){function c(a){if(c[a]!==f)return c[a];var b;if("bug-string-char-index"==a)b="a"!="a"[0];else if("json"==a)b=c("json-stringify")&&c("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var h=j.stringify,i="function"==typeof h&&k;if(i){(d=function(){return 1}).toJSON=d;try{i="0"===h(0)&&"0"===h(new Number)&&'""'==h(new String)&&h(g)===f&&h(f)===f&&h()===f&&"1"===h(d)&&"[1]"==h([d])&&"[null]"==h([f])&&"null"==h(null)&&"[null,null,null]"==h([f,g,null])&&h({a:[d,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===h(null,d)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new Date(-1))}catch(l){i=!1}}b=i}if("json-parse"==a){var m=j.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){d=m(e);var n=5==d.a.length&&1===d.a[0];if(n){try{n=!m('"	"')}catch(l){}if(n)try{n=1!==m("01")}catch(l){}if(n)try{n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}b=n}}return c[a]=!!b}var d,e,f,g={}.toString,h="function"==typeof a&&a.amd,i="object"==typeof JSON&&JSON,j="object"==typeof exports&&exports&&!exports.nodeType&&exports;j&&i?(j.stringify=i.stringify,j.parse=i.parse):j=b.JSON=i||{};var k=new Date(-0xc782b5b800cec);try{k=-109252==k.getUTCFullYear()&&0===k.getUTCMonth()&&1===k.getUTCDate()&&10==k.getUTCHours()&&37==k.getUTCMinutes()&&6==k.getUTCSeconds()&&708==k.getUTCMilliseconds()}catch(l){}if(!c("json")){var m="[object Function]",n="[object Date]",o="[object Number]",p="[object String]",q="[object Array]",r="[object Boolean]",s=c("bug-string-char-index");if(!k)var t=Math.floor,u=[0,31,59,90,120,151,181,212,243,273,304,334],v=function(a,b){return u[b]+365*(a-1970)+t((a-1969+(b=+(b>1)))/4)-t((a-1901+b)/100)+t((a-1601+b)/400)};(d={}.hasOwnProperty)||(d=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=g?d=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,d=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,d.call(this,a)});var w={"boolean":1,number:1,string:1,undefined:1},x=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!w[c]};if(e=function(a,b){var c,f,h,i=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,f=new c;for(h in f)d.call(f,h)&&i++;return c=f=null,i?e=2==i?function(a,b){var c,e={},f=g.call(a)==m;for(c in a)f&&"prototype"==c||d.call(e,c)||!(e[c]=1)||!d.call(a,c)||b(c)}:function(a,b){var c,e,f=g.call(a)==m;for(c in a)f&&"prototype"==c||!d.call(a,c)||(e="constructor"===c)||b(c);(e||d.call(a,c="constructor"))&&b(c)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],e=function(a,b){var c,e,h=g.call(a)==m,i=!h&&"function"!=typeof a.constructor&&x(a,"hasOwnProperty")?a.hasOwnProperty:d;for(c in a)h&&"prototype"==c||!i.call(a,c)||b(c);for(e=f.length;c=f[--e];i.call(a,c)&&b(c));}),e(a,b)},!c("json-stringify")){var y={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},z="000000",A=function(a,b){return(z+(b||0)).slice(-a)},B="\\u00",C=function(a){var b,c='"',d=0,e=a.length,f=e>10&&s;for(f&&(b=a.split(""));e>d;d++){var g=a.charCodeAt(d);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=y[g];break;default:if(32>g){c+=B+A(2,g.toString(16));break}c+=f?b[d]:s?a.charAt(d):a[d]}}return c+'"'},D=function(a,b,c,h,i,j,k){var l,m,s,u,w,x,y,z,B,E,F,G,H,I,J,K;try{l=b[a]}catch(L){}if("object"==typeof l&&l)if(m=g.call(l),m!=n||d.call(l,"toJSON"))"function"==typeof l.toJSON&&(m!=o&&m!=p&&m!=q||d.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&1/0>l){if(v){for(w=t(l/864e5),s=t(w/365.2425)+1970-1;v(s+1,0)<=w;s++);for(u=t((w-v(s,0))/30.42);v(s,u+1)<=w;u++);w=1+w-v(s,u),x=(l%864e5+864e5)%864e5,y=t(x/36e5)%24,z=t(x/6e4)%60,B=t(x/1e3)%60,E=x%1e3}else s=l.getUTCFullYear(),u=l.getUTCMonth(),w=l.getUTCDate(),y=l.getUTCHours(),z=l.getUTCMinutes(),B=l.getUTCSeconds(),E=l.getUTCMilliseconds();l=(0>=s||s>=1e4?(0>s?"-":"+")+A(6,0>s?-s:s):A(4,s))+"-"+A(2,u+1)+"-"+A(2,w)+"T"+A(2,y)+":"+A(2,z)+":"+A(2,B)+"."+A(3,E)+"Z"}else l=null;if(c&&(l=c.call(b,a,l)),null===l)return"null";if(m=g.call(l),m==r)return""+l;if(m==o)return l>-1/0&&1/0>l?""+l:"null";if(m==p)return C(""+l);if("object"==typeof l){for(I=k.length;I--;)if(k[I]===l)throw TypeError();if(k.push(l),F=[],J=j,j+=i,m==q){for(H=0,I=l.length;I>H;H++)G=D(H,l,c,h,i,j,k),F.push(G===f?"null":G);K=F.length?i?"[\n"+j+F.join(",\n"+j)+"\n"+J+"]":"["+F.join(",")+"]":"[]"}else e(h||l,function(a){var b=D(a,l,c,h,i,j,k);b!==f&&F.push(C(a)+":"+(i?" ":"")+b)}),K=F.length?i?"{\n"+j+F.join(",\n"+j)+"\n"+J+"}":"{"+F.join(",")+"}":"{}";return k.pop(),K}};j.stringify=function(a,b,c){var d,e,f,h;if("function"==typeof b||"object"==typeof b&&b)if((h=g.call(b))==m)e=b;else if(h==q){f={};for(var i,j=0,k=b.length;k>j;i=b[j++],h=g.call(i),(h==p||h==o)&&(f[i]=1));}if(c)if((h=g.call(c))==o){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else h==p&&(d=c.length<=10?c:c.slice(0,10));return D("",(i={},i[""]=a,i),e,f,d,"",[])}}if(!c("json-parse")){var E,F,G=String.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},I=function(){throw E=F=null,SyntaxError()},J=function(){for(var a,b,c,d,e,f=F,g=f.length;g>E;)switch(e=f.charCodeAt(E)){case 9:case 10:case 13:case 32:E++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=s?f.charAt(E):f[E],E++,a;case 34:for(a="@",E++;g>E;)if(e=f.charCodeAt(E),32>e)I();else if(92==e)switch(e=f.charCodeAt(++E)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=H[e],E++;break;case 117:for(b=++E,c=E+4;c>E;E++)e=f.charCodeAt(E),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||I();a+=G("0x"+f.slice(b,E));break;default:I()}else{if(34==e)break;for(e=f.charCodeAt(E),b=E;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++E);a+=f.slice(b,E)}if(34==f.charCodeAt(E))return E++,a;I();default:if(b=E,45==e&&(d=!0,e=f.charCodeAt(++E)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(E+1),e>=48&&57>=e)&&I(),d=!1;g>E&&(e=f.charCodeAt(E),e>=48&&57>=e);E++);if(46==f.charCodeAt(E)){for(c=++E;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==E&&I(),E=c}if(e=f.charCodeAt(E),101==e||69==e){for(e=f.charCodeAt(++E),(43==e||45==e)&&E++,c=E;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==E&&I(),E=c}return+f.slice(b,E)}if(d&&I(),"true"==f.slice(E,E+4))return E+=4,!0;if("false"==f.slice(E,E+5))return E+=5,!1;if("null"==f.slice(E,E+4))return E+=4,null;I()}return"$"},K=function(a){var b,c;if("$"==a&&I(),"string"==typeof a){if("@"==(s?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=J(),"]"!=a;c||(c=!0))c&&(","==a?(a=J(),"]"==a&&I()):I()),","==a&&I(),b.push(K(a));return b}if("{"==a){for(b={};a=J(),"}"!=a;c||(c=!0))c&&(","==a?(a=J(),"}"==a&&I()):I()),(","==a||"string"!=typeof a||"@"!=(s?a.charAt(0):a[0])||":"!=J())&&I(),b[a.slice(1)]=K(J());return b}I()}return a},L=function(a,b,c){var d=M(a,b,c);d===f?delete a[b]:a[b]=d},M=function(a,b,c){var d,f=a[b];if("object"==typeof f&&f)if(g.call(f)==q)for(d=f.length;d--;)L(f,d,c);else e(f,function(a){L(f,a,c)});return c.call(a,b,f)};j.parse=function(a,b){var c,d;return E=0,F=""+a,c=K(J()),"$"!=J()&&I(),E=F=null,b&&g.call(b)==m?M((d={},d[""]=c,d),"",b):c}}}h&&a(function(){return j})}(this)},{}],48:[function(a,module,exports){function b(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}module.exports=b},{}]},{},[1])(1)}),function(a,b,c){var d={version:"1.0.0"},e={GZ:[1,999],SZ:[1e3,1199],ZH:[1200,1399],ST:[1400,1599],FS:[1600,2099],SG:[2200,2399],ZJ:[2400,2599],ZQ:[2600,2799],JM:[2800,2999],MM:[3e3,3199],HZ:[3200,3399],MZ:[3400,3599],SW:[3600,3799],HY:[3800,3999],YJ:[4e3,4199],QY:[4200,4399],DG:[4400,5399],ZS:[5400,6399],CZ:[6400,6599],JY:[6600,6799],YF:[6800,6999]},f={};d.CA=e,d.client=(new Date).getTime(),d.__config={socket:"http://172.16.1.55:8011/",apps:"http://172.16.1.10/APPS/",socketIO:"http://172.16.1.10/APPS/engine/js/socket.io/socket.io.min.js",loader:"http://172.16.1.10/APPS/engine/js/loader.min.js",seajs:"http://172.16.1.10/APPS/engine/js/sea.js",icNo:"8002002601164723",areaCode:"",activeClassName:"etv-app-active",message:{INSTALL:{type:1,msg:"installed"},SHOW:{type:2,msg:"showed"},HIDE:{type:3,msg:"hided"},DESTROY:{type:4,msg:"destroyed"},UNINSTALL:{type:5,msg:"uninstalled"},UPDATE:{type:6,msg:"updated"}},playState:{INIT:0,PLAYING:1,PAUSE:2,STOP:3,FF:4,FR:5,VOLUME:6}},d.config=function(b){a.extend(d.__config,b||{})},d.Engine={init:function(c){this.status=a.extend({icNo:b.API.CA.icNo||d.__config.icNo,areaCode:b.API.DataAccess.info("VodApp","QAMName1")||d.__config.areaCode,pageId:"",columnId:"",channelId:"",assetId:""},c||{});var e="webSocketServers",f=b.API.SysSetting.envJSON(e);f?this.randomServers(f,function(a){d.__config.socket=a,d.Engine.connectSocket()}):this.JSONP(d.__config.socket+"servers","servers",function(a){a&&(b.API.SysSetting.envJSON(e,a),d.Engine.randomServers(a,function(a){d.__config.socket=a,d.Engine.connectSocket()}))})},randomServers:function(a,b){!function(){var c=arguments.callee,e="http://"+a[parseInt(Math.random()*a.length)]+"/";d.Engine.JSONP(e+"check","check",function(a){a?b(e):c()},function(a){c()})}()},JSONP:function(a,b,c,d,e){e=e||5e3;var f=document.getElementsByTagName("head")[0],g=document.createElement("script"),h=!1;window["__callback__"+b]=function(a){try{c&&c(a)}catch(e){d&&d(e)}delete window["__callback__"+b],f.removeChild(g)};var i=setTimeout(function(){h=!0,clearTimeout(i),f.removeChild(g),d&&d("timeout")},e);g.onload=function(){h||(h=!0,clearTimeout(i))},g.src=a,f.appendChild(g)},connectSocket:function(){var b=this,c=function(a){var c=d.Engine.socket=a.connect(d.__config.socket);c.on("install",function(a,c){b.fire("install",a,c)}),c.on("show",function(a,c){b.fire("show",a,c)}),c.on("hide",function(a,c){b.fire("hide",a,c)}),c.on("destroy",function(a,c){b.fire("destroy",a,c)}),c.on("uninstall",function(a,c){b.fire("uninstall",a,c)}),c.on("update",function(a,c){b.fire("update",a,c)}),c.on("connect",function(){b.fire("socketConnect"),b.sendStatus()}),b.fire("ready")};this.on("change",function(){b.sendStatus()}),window.io?c(io):a.getScript(d.__config.socketIO,function(){c(io)})},sendStatus:function(){this.socket.emit("status",this.status)},sendMessage:function(a){this.socket.emit("message",a)},setStatus:function(b){this.status=a.extend(this.status,b||{}),this.fire("change",this.status)},getStatus:function(){return this.status},setPlayState:function(a){this.playState!==a&&(this.playState=a,this.fire("playState",this.playState))},setChannelId:function(a){this.status.channelId!==a&&(this.status.channelId=a,this.fire("change",this.status))},setAssetId:function(a){this.status.assetId!==a&&(this.status.assetId=a,this.fire("change",this.status))},setPoint:function(a){this.currentPoint!==a&&(this.currentPoint=a,this.fire("point",this.currentPoint))},getLoader:function(a){return f[a.appId]||new d.Loader(a)},findLoader:function(a){return f[a]},getLoaders:function(){return f},isMatch:function(b){var c=this.status,e=!0;return delete b.deployId,delete b.profileId,a.each(b,function(a,b){b&&(e="areaCode"==a?b==d.Util.getCA(c[a]):b==c[a])}),e},fixMainAppEvent:function(){var c=document.onkeyup||function(){},d=document.onkeydown||function(){},e=document.onkeypress||function(){};document.onkeyup=document.onkeydown=document.onkeypress=null;var g=function(b,c){var d=[];a.each(f,function(a,b){b._active&&(d=d.concat(b.keyCodes))}),-1==a.inArray(b.which,d)&&c(b)};b.Event.on("keydown",function(a){g(a,d)}),b.Event.on("keyup",function(a){g(a,c),g(a,e)})},clearLoaders:function(){a.each(f,function(a,b){b&&b.destroy()})}},a.extend(d.Engine,b.Base),d.Util={appendFrame:function(a){document.body.appendChild(a);var b=a.contentWindow,c=b.document,e="var d = document;d.getElementsByTagName('head')[0].appendChild(d.createElement('script')).src='"+d.__config.loader+"'";return c.open().write('<body onload="'+e+'">'),c.close(),a.style.cssText="position: absolute;top:-1px;left:-1px; width:1px;height:1px; border:none; display:none;z-index:9999;",b},loadHTML:function(b,c,d,e){if(b){var f=/^http\:\/\//.test(b)?b:c+b;d.document&&a.get(f,function(a){d.document.body.innerHTML=a,e&&e()})}},loadCSS:function(b,c,d){if(b&&b.length>0&&d.document){var e=d.document.getElementsByTagName("head")[0];b=a.isArray(b)?b:[b],a.each(b,function(a,b){var f=d.document.createElement("link"),g=/^http\:\/\//.test(b)?b:c+b;f.setAttribute("rel","stylesheet"),f.setAttribute("href",g),e.appendChild(f)})}},loadScript:function(b,c,d){b&&b.length>0&&(b=a.isArray(b)?b:[b],a.each(b,function(a,b){var e=/^http\:\/\//.test(b)?b:c+b;d.seajs.use(e,function(a){d.__etv_app__=a,a&&a.init&&a.init()})}))},loadPage:function(a,b){d.Util.loadHTML(a.html,b.basePath,b.contentWindow,function(){d.Util.loadScript(a.js,b.basePath,b.contentWindow)}),d.Util.loadCSS(a.css,b.basePath,b.contentWindow)},toArray:function(b){return a.isArray(b)?b:b||0===b?[b]:[]},timeArrayToSecondArray:function(c){var d=[];return a.each(c,function(a,c){d.push(b.Util.date(c).getTime()/1e3)}),d},getPackageUrl:function(a){return a.indexOf("http://")>-1?a:d.__config.apps+a},getCA:function(b){var c=this;return this.__ca?this.__ca:(a.each(e,function(a,d){return b>=d[0]&&b<=d[1]?(c.__ca=a,!1):void 0}),this.__ca||"")}},d.Loader=b.Class.create({init:function(a){this.setAttr(a),this._active=!1,this.isShow=!1,this.iframe=document.createElement("iframe"),this.contentWindow=null,this.status=d.Engine.status,this.state=0,this._events(),this.setAuto(),f[a.appId]=this,d.Engine.fire("appInit",this)},setAttr:function(a){this.app=a,this.appId=a.appId,this.auto=!!a.auto,this.startTime=d.Util.timeArrayToSecondArray(d.Util.toArray(a.startTime)),this.stopTime=d.Util.timeArrayToSecondArray(d.Util.toArray(a.stopTime)),this.startPoint=d.Util.toArray(a.startPoint),this.stopPoint=d.Util.toArray(a.stopPoint),this.playState=a.playState||[],this.showKey=parseInt(a.showKey)||null,this.activeKey=parseInt(a.activeKey)||null,this.basePath=d.Util.getPackageUrl(this.app.appPackage.replace("package.json","")),this.keyCodes=[]},update:function(a){this.setAttr(a),this.offset({width:parseInt(a.width||0),height:parseInt(a.height||0),left:parseInt(a.left||0),top:parseInt(a.top||0)}),clearInterval(this.__startId),clearInterval(this.__stopId),this.setAuto(),this.fire("update"),this.sendMessage("UPDATE")},offset:function(b){return b?void a(this.iframe).css(b):a(this.iframe).offset()},sendMessage:function(b){if("string"==typeof b){var c=d.__config.message[b];if(c){var e=this.status;c.appId=this.appId,a.extend(c,e),d.Engine.sendMessage(c)}else d.Engine.sendMessage(b)}else d.Engine.sendMessage(b)},install:function(){if(0===this.state){this.state=1;var a=this.app;this.contentWindow=d.Util.appendFrame(this.iframe),this.offset({width:parseInt(a.width||0),height:parseInt(a.height||0),left:parseInt(a.left||0),top:parseInt(a.top||0)}),this.inject(),this.fire("install"),this.sendMessage("INSTALL"),d.Engine.fire("appInstall",this)}},show:function(){2!==this.state&&(0===this.state&&this.install(),this.iframe.style.display="block",this.state=2,this.sendMessage("SHOW"),this.isShow=!0,this.fire("show"),d.Engine.fire("appShow",this))},hide:function(){3!==this.state&&(this.state=3,this.iframe.style.display="none",this.sendMessage("HIDE"),this.isShow=!1,this.fire("hide"),d.Engine.fire("appHide",this))},destroy:function(){4!==this.state&&(this.state=4,this.contentWindow.__etv_app__&&this.contentWindow.__etv_app__.destroy&&this.contentWindow.__etv_app__.destroy(),this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this.isShow=!1,this.iframe=null,this.contentWindow=null,clearInterval(this.__startId),clearInterval(this.__stopId),this.unBind(),delete f[this.appId],this.sendMessage("DESTROY"),d.Engine.fire("appDestroy",this),this.parent.prototype.destroy.apply(this,arguments))},uninstall:function(){5!==this.state&&(this.state=5,this.isShow=!1,this.destroy(),this.sendMessage("UNINSTALL"),d.Engine.fire("appUninstall",this))},inject:function(){var b={AppLoader:this};b.AppLoader.seajs=d.__config.seajs,a.extend(this.contentWindow,b)},appInit:function(){var b=this;this.packageJSON?(b.keyCodes=b.packageJSON.keyCode||[],d.Util.loadPage(this.packageJSON.main,this)):a.getJSON(d.Util.getPackageUrl(this.app.appPackage),function(a){a&&(b.packageJSON=a,b.keyCodes=b.packageJSON.keyCode||[],a.main&&d.Util.loadPage(b.packageJSON.main,b))})},autoShowByTime:function(){var b=this,c=this.startTime;c&&c.length>0&&(b.__startId=setInterval(function(){var d=parseInt((new Date).getTime()/1e3);a.each(c,function(a,c){return d==c?(b.show(),!1):void 0})},1e3))},autoHideByTime:function(){var b=this,c=this.stopTime;c&&c.length>0&&(b.__stopId=setInterval(function(){var d=parseInt((new Date).getTime()/1e3);a.each(c,function(a,c){return d==c?(b.hide(),!1):void 0})},1e3))},autoByPoint:function(b){if(b){var c=this;a.each(this.startPoint,function(a,d){return d==b?(c.show(),!1):void 0}),a.each(this.stopPoint,function(a,d){return d==b?(c.hide(),!1):void 0})}},autoByPlayState:function(a){var b=this.playState;if(b&&b.length>0){for(var c=!1,d=0,e=this.playState.length;e>d;d++)if(a==this.playState[d]){c=!0;break}c?this.show():this.hide()}},setAuto:function(){this.auto&&(this.startTime.length>0||this.stopTime.length>0||this.startPoint.length>0||this.stopPoint.length>0?(this.autoShowByTime(),this.autoHideByTime()):this.show())},go:function(a,b){if(a){if(b){var c=util.param(b);a+=a.indexOf("?")>-1?"&"+c:"?"+c}this.fire("go",a),top.location.href=a}},_events:function(){var c=this;this.registerEvent(b.Event.on("keydown",function(a){this._active&&this.contentWindow.TVUI.Event.fire("keydown",a.which)},this)),this.registerEvent(b.Event.on("keyup",function(a){this._active&&this.contentWindow.TVUI.Event.fire("keyup",a.which)},this)),this.on("active",function(){a.each(f,function(a,b){c.app.appId!=a&&b.unActive()}),c.iframe.className=d.__config.activeClassName,d.Engine.fire("appActive",c)}),this.on("unActive",function(){c.iframe.className="";var b=!1;a.each(f,function(a,c){return c._active?(b=!0,!1):void 0}),d.Engine.fire("appUnActive",c),!b&&d.Engine.fire("appAllUnActive",c)}),this.bind("change",function(a){c.status=a,c.fire("status",a)}),this.bind("point",function(a){c.autoByPoint(a),c.fire("point",a)}),this.bind("playState",function(a){c.autoByPlayState(a),c.fire("playState",a)}),this.on("show",function(){c.app.active&&c.active()}),this.on("hide",function(){c.unActive()}),this.registerEvent(b.Event.on("keyup",function(a){switch(a.which){case c.showKey:c.isShow?c.hide():c.show();break;case c.activeKey:c.isShow&&(c._active?c.unActive():c.active())}})),top&&top.window&&top.window.addEventListener("unload",function(){c.fire("unload"),c.destroy()},!1)},bind:function(a,c){this.__eventHandlers||(this.__eventHandlers={}),this.__eventHandlers[++b.uuid]={name:a,callback:c},d.Engine.on.call(d.Engine,a,c)},unBind:function(b){if(b){var c=this.__eventHandlers[b];c&&d.Engine.off(c.name,c.callback)}else a.each(this.__eventHandlers||{},function(a,b){d.Engine.off(b.name,b.callback)})},addKey:function(b){var c=a.isArray(b)?b:[b],d=this;a.each(c,function(b,c){-1==a.inArray(c,d.keyCodes)&&d.keyCodes.push(c)})},removeKey:function(b){var c=a.isArray(b)?b:[b],d=this;a.each(c,function(b,c){d.keyCodes=a.grep(d.keyCodes,function(a){return a!=c})})}},b.Base),d.Engine.on("install",function(b,c){b=a.isArray(b)?b:[b],(!c||c&&d.Engine.isMatch(c))&&a.each(b,function(a,b){d.Engine.getLoader(b).install()})}),d.Engine.on("show",function(b,c){(!c||c&&d.Engine.isMatch(c))&&(b=a.isArray(b)?b:[app],a.each(b,function(a,b){d.Engine.getLoader(b).show()}))}),d.Engine.on("hide",function(b,c){(!c||c&&d.Engine.isMatch(c))&&(b=a.isArray(b)?b:[b],a.each(b,function(a,b){var c=d.Engine.findLoader(b);c&&c.hide()}))}),d.Engine.on("destroy",function(b,c){(!c||c&&d.Engine.isMatch(c))&&(b=a.isArray(b)?b:[b],a.each(b,function(a,b){var c="object"==typeof b?d.Engine.findLoader(b.appId):d.Engine.findLoader(b);c&&c.destroy()}))}),d.Engine.on("uninstall",function(b,c){(!c||c&&d.Engine.isMatch(c))&&(b=a.isArray(b)?b:[b],a.each(b,function(a,b){var c="object"==typeof b?d.Engine.findLoader(b.appId):d.Engine.findLoader(b);c&&c.uninstall()}))}),d.Engine.on("update",function(b,c){(!c||c&&d.Engine.isMatch(c))&&(b=a.isArray(b)?b:[b],a.each(b,function(a,b){var c=d.Engine.findLoader(b.appId);c&&c.destroy(),d.Engine.getLoader(b).install()}))}),c.ETV=d,d.Engine.fixMainAppEvent(),window.define&&define(function(require,exports,module){module.exports=d})}(Zepto,TVUI,this);